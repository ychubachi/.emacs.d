;; -*- mode: Org -*-
#+STARTUP: overview indent num align inlineimages logdone hidestars
#+TAGS: TODO(t) DRAFT(d) PBLISHED(p) SOMEDAY(s)

README.org
- [[https://github.com/ychubachi/.emacs.d#readme][ychubachi/.emacs.d: emacs setting files created on 2020/11/23]]

* ã¯ã˜ã‚ã«
** ã“ã®è¨­å®šã«ã¤ã„ã¦
- init.elã®å®Ÿè¡Œæ™‚ã€ã“ã®README.orgã‹ã‚‰README.elã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- orgã®ãƒãƒƒã‚±ãƒ¼ã‚¸ã¯æ‰‹å‹•ã§æœ€æ–°ç‰ˆã«æ›´æ–°ã—ã¦ãŠãã¾ã™ã€‚

** äº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã‚‚ã®
- å„ç¨®ãƒ•ã‚©ãƒ³ãƒˆ
  - Noto Sans Mono CJK JP-12
- migemo
  - cmigemo
- pygment
  - python3ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - /home/yc/.local/binã«ãƒ‘ã‚¹
  - pip install -U pip
  - pip install pygments
- graphviz(dot)
  - sudo apt install graphviz
- org-roam
  - sqlite3

** Emacsã®Xé–¢ä¿‚ã®è¨­å®šã‚’å¤–éƒ¨åŒ–ã™ã‚‹                                 :PBLISHED:
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-09 18:32:26]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, X resources
:ID:       o2b:93247d9c-9742-45f2-9543-eab6ffe14628
:POST_DATE: [2021-11-09 Tue 18:33]
:POSTID:   248
:END:
*** Emacs ã® X resources è¨­å®š
Emacs ã‚’Xç’°å¢ƒã§ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã«èµ·å‹•ã™ã‚‹ã¨ã€ Emacs ã¯Xã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãªã‚Šã¾ã™ã‹ã‚‰ã€ [[https://wiki.archlinux.jp/index.php/X_resources][X resources ]]ã‚’åˆ©ç”¨ã—ãŸè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ãƒ•ã‚©ãƒ³ãƒˆã‚„ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã®å¤§ãã•ãªã©ã‚’è¨­å®šã§ãã¾ã™ã€‚

ã“ã‚Œã‚‰ã®è¨­å®šã¯ã€Emacs lisp ã§æ›¸ã init.el ã§ã‚‚ã§ãã¾ã™ãŒã€ Emacs ã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç«¯æœ«ã§Xã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’ä½¿ã‚ãšä½œæ¥­ã‚’ã™ã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã€‚ãã®ãŸã‚ã€ X resources ã§è¨­å®šã§ãã‚‹ã‚‚ã®ã¯ã€init.elã§ã¯ãªãX resources ã®æ–¹ã«è¨­å®šã—ã¦ãŠãã¨ã„ã†ã®ã‚‚ä¸€ã¤ã®è€ƒãˆæ–¹ã§ã™ã€‚

ã¾ãŸã€ init.el  ã§ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºã‚’è¨­å®šã™ã‚‹ã¨ã€ä¸€æ—¦æ¨™æº–ã®ã‚µã‚¤ã‚ºã§ç«‹ã¡ä¸ŠãŒã£ã¦ã‹ã‚‰  æ”¹ã‚ã¦è¨­å®šã•ã‚ŒãŸã‚µã‚¤ã‚ºã«åˆ‡ã‚Šæ›¿ã‚ã‚‹ã¨ã„ã†ã€ã‚®ã‚¯ã‚·ãƒ£ã‚¯ã—ãŸæŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚resources ã«è¨­å®šã—ã¦ãŠãã¨ã€ã‚¹ãƒ ãƒ¼ã‚ºã«èµ·å‹•ã—ã¾ã™ï¼ˆèµ·å‹•æ™‚é–“ã‚‚å¤šå°‘ã€æ—©ããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰ã€‚

è¨­å®šã§ãã‚‹ã®ã¯ã€æ¬¡ã®ä¾‹ã®é€šã‚Šã€Xã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã§å‹•ä½œã™ã‚‹Emacsã®ãƒ•ã‚©ãƒ³ãƒˆã‚„ã€è¡Œé–“ï¼ˆlineSpacingï¼‰ã€ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºï¼ˆgeometryï¼‰ãªã©ã§ã™ã€‚è¨­å®šã§ãã‚‹é …ç›®ã®ä¸€è¦§ã¯ [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Table-of-Resources.html][Table-of-Resources]] ã«ã‚ã‚Šã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ åã¯ Emacs ã«ã—ã¾ã—ãŸ[fn:1]ã€‚

#+begin_example
!! ~/.Xresources
Emacs.font: Noto Sans Mono CJK JP-12
Emacs.lineSpacing: 0
Emacs.geometry: 220x38-80+50
Emacs.cursorBlink: off
Emacs.coursorColor: dark green
Emacs.menuBar: on
Emacs.toolBar: off
Emacs.tabBar: on
Emacs.verticalScrollBars: off
Eamcs.useXIM: off
#+end_example

ã“ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§
#+begin_src bash
  xrdb ~/.Xresources
#+end_src

ã¨æ‰“ã¡ã¾ã™ã€‚è¨­å®šã•ã‚ŒãŸã‹ç¢ºèªã™ã‚‹ã«ã¯ã€
#+begin_src bash
  xrdb -query
#+end_src

ã¨ã—ã¾ã™ã€‚ã“ã®è¨­å®šã¯ logout ã™ã‚‹ã¨ç„¡åŠ¹ã«ãªã‚Šã¾ã™ã‹ã‚‰ã€ Emacs ã‚’èµ·å‹•ã™ã‚‹å‰ã«å¿…ãš xrdb ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚é€šå¸¸ã®Xãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç’°å¢ƒã§ã—ãŸã‚‰ .xinitrc ã«ã“ã®è¨­å®šã‚’ã—ã¾ã™ã€‚WSL ã§ã¯ã€ .bashrc ã«æ›¸ã„ã¦ã—ã¾ã£ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚

#+begin_src bash
  [[ -f ~/.Xresources ]] && xrdb ~/.Xresources
#+end_src

*** Emacsã§ã®å‹•ä½œç¢ºèª
.Xresources ã«æ›¸ã„ãŸè¨­å®šãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‹Emacsã§è©¦ã—ã¦ã¿ã‚‹æ–¹æ³•ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

#+begin_src bash
  emacs -q
#+end_src

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ -Q ã§ãªã -q ã§ã™ã€‚ -Q ã ã¨ Emacs ã¯ Xãƒªã‚½ãƒ¼ã‚¹ã‚’å‡¦ç†ã—ã¾ã›ã‚“[fn:2]ã€‚

[fn:1] [[https://ayatakesi.github.io/emacs/27.1/html/Resources.html][Emacsã§ã¯é€šå¸¸ã€â€˜emacsâ€™ã§ã™ã€‚Emacsã®å®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«åã®å¦‚ä½•ã«ã‹ã‹ã‚ã‚‰ãšã«ã€Emacsã®ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«é©ç”¨ã•ã‚Œã‚‹å®šç¾©ã‚’æŒ‡å®šã™ã‚‹ã«ã¯ã€â€˜Emacsâ€™ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚]]

[fn:2]  [[https://ayatakesi.github.io/emacs/27.1/html/Resources.html][å¤‰æ•°inhibit-x-resourcesã‚’énilå€¤ã«ã‚»ãƒƒãƒˆã—ãŸå ´åˆã€Emacsã¯Xãƒªã‚½ãƒ¼ã‚¹ã‚’å‡¦ç†ã—ã¾ã›ã‚“ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³â€˜-Qâ€™ (ã¾ãŸã¯â€˜--quickâ€™)ã§Emacsã‚’å‘¼ã³å‡ºã—ãŸå ´åˆã€inhibit-x-resourcesã¯è‡ªå‹•çš„ã«tã«ã‚»ãƒƒãƒˆã•ã‚Œã¾ã™]]
** ãƒ•ã‚©ãƒ³ãƒˆã®ç¢ºèª

Xã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã§è¨­å®šã—ãŸãƒ•ã‚©ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æœ¬å½“ã¯å…¨ã¦ç­‰å¹…ã«ãªã‚‹ã¨ã‚ˆã„ã®ã§ã™ãŒã€ãªã‹ãªã‹é›£ã—ã„ãƒ»ãƒ»ãƒ»ã€‚

- [[https://uwabami.github.io/cc-env/Emacs.html][Emacs ã®è¨­å®š | Youhei SASAKIâ€™s official site]] ã‚ˆã‚Š
#+begin_example
| mmmm |
| llll |
| æ—¥æœ¬ |
| æ¼¢å­— |
| ã‚ã‚ |
| ã‚“ã‚“ |
| ï¿¥ï¿¥ |
| \\\\ |
| ã€€ã€€   |
|      |

|abcdefghijkl|
|ABCDEFGHIJKL|
|'";:-+=/\~`?|
|âˆâ‰¤â‰¥âˆâˆ‘âˆ«|
|Ã—Â±â‰’â‰¡âŠ†âŠ‡|  â† GUI ã ã¨ä¸€éƒ¨åŠè§’ã«ãªã‚‹
|Î±Î²Î³Î´ÎµÎ¶|  â† GUI ã ã¨åŠè§’ã«ãªã‚‹
|Î·Î¸Î¹ÎºÎ»Î¼|  â† GUI ã ã¨åŠè§’ã«ãªã‚‹
|Î‘Î’Î“Î”Î•Î–|  â† GUI ã ã¨åŠè§’ã«ãªã‚‹
|Î—Î˜Î™ÎšÎ›Îœ|  â† GUI ã ã¨åŠè§’ã«ãªã‚‹
|æ—¥æœ¬èªã®ç¾è¦³|
|ã‚ã„ã†ãˆãŠã‹|
|ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«|
|ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼|

| hoge                 | hogeghoe | age              |
|----------------------+----------+------------------|
| ä»Šæ—¥ã‚‚ã„ã„å¤©æ°—ã§ã™ã­ | ãŠã€     | ç­‰å¹…ã«ãªã£ãŸğŸ‘ ğŸº|
|----------------------+----------+------------------|
#+end_example

** Copyright
- Copyright ãªã©ã€‚

#+begin_src emacs-lisp
  ;;; README.el --- My README.el  -*- lexical-binding: t; -*-

  ;; Copyright (C) 2020 Yoshihide Chubachi

  ;; Author: Yoshihide Chubachi <yoshi@chubachi.net>

  ;; This program is free software: you can redistribute it and/or modify
  ;; it under the terms of the GNU General Public License as published by
  ;; the Free Software Foundation, either version 3 of the License, or
  ;; (at your option) any later version.

  ;; This program is distributed in the hope that it will be useful,
  ;; but WITHOUT ANY WARRANTY; without even the implied warranty of
  ;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ;; GNU General Public License for more details.

  ;; You should have received a copy of the GNU General Public License
  ;; along with this program.  If not, see <http://www.gnu.org/licenses/>.

  ;;; Commentary:

  ;;  My README.el.

  ;;; Code:
#+end_src

* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†
** leaf - ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®šã€ã®ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸                    :PBLISHED:
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-10 00:01:40]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp, Leaf
:ID:       o2b:046ef621-cfc9-4aa5-9704-861b7710b61d
:POST_DATE: [2021-11-10 Wed 00:03]
:POSTID:   293
:END:

*** leafã®è¨­å®š
leafã¯Emacsã®è¨­å®šã‚’ã‚ˆã‚Šç¾ã—ãè¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¨­å®šã‚’è¨˜è¿°ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŸã‚ã®æ§˜ã€…ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨çµ„ã¿åˆã‚ã›åˆ©ç”¨ã—ã¾ã™ã€‚è¨­è¨ˆæ€æƒ³ãŒã—ã£ã‹ã‚Šã—ã¦ã„ã¦ã€åˆ©ç”¨è€…ã‚’æƒ‘ã‚ã›ãªã„ã€ç‰¹ã«ã€Emacs lispã‚’è§£ã™ã‚‹äººã«ã¨ã£ã¦ã¯ã€lispã®ä¸–ç•Œè¦³ã‚’å´©ã•ãªã„ã§è¨˜è¿°ã§ãã‚‹ã®ãŒé­…åŠ›ã§ã—ã‚‡ã†ã€‚

ã¯ã˜ã‚ã«ã€leafã«é–¢ã™ã‚‹å…¨ã¦ã®è¨­å®šã‚’ç´¹ä»‹ã—ã¾ã™ã€‚æ¬¡ã«ã€éƒ¨åˆ†ã”ã¨ã«è¨­å®šã‚’èª¬æ˜ã—ã¾ã™ã€‚

#+CAPTION: leafã®è¨­å®šï¼ˆå…¨ä½“ï¼‰
#+NAME: leaf
#+begin_src emacs-lisp :noweb yes
  (prog1 "prepare leaf"
    <<setup-package>>

    <<install-leaf>>

    <<install-leaf-optional-packages>>)
#+end_src

#+RESULTS: leaf
: prepare leaf

*** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ©Ÿèƒ½ã®åˆæœŸè¨­å®š
æœ€åˆã«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å–ã£ã¦ãã‚‹å ´æ‰€ï¼ˆï¼ãƒªãƒã‚¸ãƒˆãƒªï¼‰ã‚’è¨­å®šã—ã¾ã™ã€‚melpaã¨gnuã®2ã¤ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

Emacsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’29.0.50ã«ã—ãŸã®ã§orgã®ãƒªãƒã‚¸ãƒˆãƒªã¯å‰Šé™¤ã—ã¾ã—ãŸï¼ˆè¿½åŠ ã™ã‚‹å ´åˆã¯ ~("org"   . "https://orgmode.org/elpa/")~ ã‚’è¨˜å…¥ï¼‰ã€‚

è¨­å®šãŒçµ‚ã‚ã£ãŸã‚‰ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚ºã—ã¾ã™ã€‚

#+NAME: setup-package
#+begin_src emacs-lisp :tangle no
  (prog1 "package"
    (custom-set-variables
     '(package-archives
       '(("melpa" . "https://melpa.org/packages/")
         ("gnu"   . "https://elpa.gnu.org/packages/"))))
    (package-initialize))
#+end_src

#+RESULTS: setup-package
: package

*** leafæœ¬ä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
Emacsæ¨™æº–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€leafãã®ã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
#+NAME: install-leaf
#+begin_src emacs-lisp :tangle no
  (prog1 "leaf"
    (unless (package-installed-p 'leaf)
      (unless (assoc 'leaf package-archive-contents)
        (package-refresh-contents))
      (condition-case err
          (package-install 'leaf)
        (error
         (package-refresh-contents)
         (package-install 'leaf)))))
#+end_src

#+RESULTS: install-leaf
: leaf

*** leafã«é–¢é€£ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
leafã«è¿½åŠ ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚

#+NAME: install-leaf-optional-packages
#+begin_src emacs-lisp :tangle no
  (leaf leaf
    :config
    (leaf leaf-keywords
      :ensure t
      :config (leaf-keywords-init))
    (leaf leaf-convert
      :ensure t)
    (leaf leaf-tree
      :ensure t
      :custom ((imenu-list-size . 30)
               (imenu-list-position . 'left)))
    (leaf hydra
      :ensure t)
    (leaf el-get
      :ensure t
      :custom ((el-get-git-shallow-clone  . t)))
    (leaf diminish
      :ensure t))
#+end_src

#+RESULTS: install-leaf-optional-packages
: leaf

*** å‚è€ƒ
+ [[https://qiita.com/conao3/items/dc88bdadb0523ef95878#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB][[æ­£å¼ãƒªãƒªãƒ¼ã‚¹]leaf.elã§é›‘ç„¶ã¨ã—ãŸEmacsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€Œinit.elã€ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã«ã™ã‚‹ - Qiita]]
+ [[https://qiita.com/conao3/items/347d7e472afd0c58fbd7#%E4%BE%BF%E5%88%A9%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB][Emacså…¥é–€ã‹ã‚‰å§‹ã‚ã‚‹leaf.elå…¥é–€ - Qiita]]
+ leaf-hydraã¯[[https://github.com/abo-abo/hydra][hydra]]ã§ã‚­ãƒ¼ã®è¨­å®šã‚’è¡Œã†éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚
+ [[https://qiita.com/tadsan/items/c859c5c04724cbda75fc][æŒ‡å®šã—ãŸãƒã‚¤ãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã—ãªã„(diminishç¯‡) - Qiita]]

** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ï¼ˆstraightï¼‰

#+begin_src emacs-lisp
  (leaf straight
    :config
    (defvar bootstrap-version)
    (let ((bootstrap-file
           (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
          (bootstrap-version 5))
      (unless (file-exists-p bootstrap-file)
        (with-current-buffer
            (url-retrieve-synchronously
             "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
             'silent 'inhibit-cookies)
          (goto-char (point-max))
          (eval-print-last-sexp)))
      (load bootstrap-file nil 'nomessage))
    (setq package-enable-at-startup nil))
#+end_src

#+RESULTS:
: straight

* ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¤‰æ•°
** ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†é›¢ï¼ˆcus-editï¼‰

#+begin_src emacs-lisp
  (leaf cus-edit
    :doc "tools for customizing Emacs and Lisp packages"
    :tag "builtin" "faces" "help"
    :custom `((custom-file . ,(locate-user-emacs-file "custom.el"))))
#+end_src

#+RESULTS:
: cus-edit

** customizeå¤‰æ•°ã®è¨­å®šï¼ˆcus-startï¼‰
- ä¸€æ—¦å…¨ã¦è¨­å®šã›ãšã€å¿…è¦ã«ãªã£ãŸã‚‰å†åº¦è¨­å®šã™ã‚‹
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰ã®è¨­å®šãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¤‰æ•°ã§ã‚‚ã§ãã‚‹å ´åˆã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¤‰æ•°ã‚’ä½¿ç”¨

#+begin_src emacs-lisp
  (leaf cus-start
    :doc "define customization properties of builtins"
    :tag "builtin" "internal"
    :custom
    ((inhibit-startup-screen . t)               ; ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’éè¡¨ç¤º
     (ring-bell-function . 'ignore)             ; ãƒ™ãƒ«ã‚’é³´ã‚‰ã•ãªã„
     (fill-column . 100))                       ; 100æ¡ã§æ”¹è¡Œï¼ˆãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ï¼‰
    :custom
    ((global-display-line-numbers-mode . t)     ; è¡Œç•ªå·è¡¨ç¤º
     (display-line-numbers-width . 4))          ; è¡¨ç¤ºã™ã‚‹è¡Œç•ªå·ã®æ¡æ•°
    :custom
    ((global-auto-revert-mode . t)              ; æ›´æ–°ã•ã‚ŒãŸã‚‰è‡ªå‹•çš„ã«å†èª­è¾¼
     (auto-revert-verbose . nil))                       ; å†èª­è¾¼ã®éš›ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤º
    :custom
    ((show-paren-mode . t)                      ; æ‹¬å¼§ã®å¯¾å¿œé–¢ä¿‚ã‚’è¡¨ç¤ºã™ã‚‹
     (show-paren-style . 'mixed))                       ; å¯¾å¿œé–¢ä¿‚ã‚’è¡¨ç¤ºã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«
    :custom                                     ; VCã®è¨­å®š
    ((vc-follow-symlinks . t)                   ; VCå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®å ´åˆã€æœ¬ä½“ã‚’è¾¿ã‚‹
     (auto-revert-check-vc-info . t))           ; VCã§æ›´æ–°ãŒã‚ã£ãŸå ´åˆã€è‡ªå‹•ã§æ›´æ–°
    :custom                                     ; æœ€å¾Œã«ç·¨é›†ã—ãŸå ´æ‰€ã‚’è¨˜æ†¶
    ((save-place-mode . t))
    :custom                                     ; ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š
    ((version-control . t)
     (backup-directory-alist . '(("." . ".~")))
     (delete-old-versions . t)))
#+end_src

#+RESULTS:
: cus-start

+ å‚è€ƒ
  * [[https://ayatakesi.github.io/emacs/24.5/Backup-Names.html][GNU Emacs Manual(Japanese Translation): Backup Names]]
  * If delete-old-versions is t, Emacs deletes the excess backup files silently.]]

+ å¤ã„è¨­å®š
#+begin_src emacs-lisp :tangle no
  (leaf cus-start
    :doc "define customization properties of builtins"
    :tag "builtin" "internal"
    :preface
    (defun c/redraw-frame nil
      (interactive)
      (redraw-frame))
    :bind (("M-ESC ESC" . c/redraw-frame))
    :custom '((user-login-name . "yc")
              (create-lockfiles . nil)
              (debug-on-error . t)
              (init-file-debug . t)
              (frame-resize-pixelwise . t)
              (enable-recursive-minibuffers . t)
              (history-length . 1000)
              (history-delete-duplicates . t)
              (scroll-preserve-screen-position . t)
              (scroll-conservatively . 100)
              (mouse-wheel-scroll-amount . '(1 ((control) . 5)))
              (text-quoting-style . 'straight)
              (use-dialog-box . nil)
              (use-file-dialog . nil)
              (indent-tabs-mode . nil)
              ))
#+end_src

#+RESULTS:
: cus-start

* Emacsæœ¬ä½“ã®è¨­å®š
** (require 'cl)ã‚’æ¤œæŸ»ã—ãªã„

#+begin_src emacs-lisp
  (leaf *emacs
    :config
    (setq byte-compile-warnings '(not cl-functions obsolete)))
#+end_src

#+RESULTS:
: *emacs

** yes/noã®é¸æŠã‚’y/nã«ç°¡ç•¥åŒ–

#+begin_src emacs-lisp
  (defalias 'yes-or-no-p 'y-or-n-p)
#+end_src

#+RESULTS:
: yes-or-no-p

** ä¿å­˜æ™‚ã€ä¸è¦ãªç©ºç™½ã‚’å‰Šé™¤

#+begin_src emacs-lisp
  (add-hook 'before-save-hook 'delete-trailing-whitespace)
#+end_src

#+RESULTS:
| delete-trailing-whitespace |

* ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
** C-hã‚’BSã«ã€C-@ã‚’helpã«
- æ¨™æº–ã§
- [[https://www.reddit.com/r/spacemacs/comments/l2fjzy/remapping_ch_to_backspace_and_remap_help_menu_to/][Remapping C-h to backspace, and remap "help" menu to anything else? : spacemacs]]

- :init ã§ã¯ãªã :config ã ã¨æ©Ÿèƒ½ã—ãªã„
  - :config ã®ä¸­èº«ã¯ eval-after-load ã§å®Ÿè¡Œã•ã‚Œã‚‹
  - :bindãŒã‚ã‚‹ã¨ã“ã†ãªã‚‹ã‚ˆã†ã 
- help-map ã¯ :bind ã§è¨­å®šã§ããªã„
  - ã“ã“ã§ã¯ :bind ã‚’åˆ©ç”¨ã—ãªã„
  - :bind ã‚’åˆ©ç”¨ã—ãªã‘ã‚Œã° :init ã¨ :config

#+begin_comment
    (global-set-key (kbd "C-h") 'delete-backward-char))
    (global-set-key (kbd "C-@") help-map)
#+end_comment

#+begin_src emacs-lisp
  (leaf *backspace
    :init (global-set-key (kbd "C-@") help-map)
    :bind (("C-h" . delete-backward-char)))
#+end_src

#+RESULTS:
: *backspace

** Undoã‚’C-zã«
- æŒ‡ãŒè¦šãˆã¦ã—ã¾ã£ã¦ã„ã‚‹

#+begin_src emacs-lisp
  (leaf *undo :bind (("C-z" . undo)))
#+end_src

#+RESULTS:
: *undo

** toggle-truncate-linesã‚’C-c tã«

#+begin_src emacs-lisp
  (leaf *toggle-truncate-lines :bind (("C-c t" . toggle-truncate-lines)))
#+end_src

#+RESULTS:
: *toggle-truncate-lines

* ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¨­å®š
** isearch

- isearch ã§æ¼¢å­—å…¥åŠ›ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

#+begin_src emacs-lisp
  (leaf isearch
    :bind ((isearch-mode-map
            ("C-o" . isearch-toggle-input-method))))
#+end_src

** wdired

- [[https://ohzeki.hatenablog.com/entry/20160115/1452838970][Emacsã®diredè¡¨ç¤ºã§ãƒ•ã‚¡ã‚¤ãƒ«åç·¨é›† - ohzekiâ€™s diary]]

#+begin_src emacs-lisp
  (leaf wdired
    :doc "Rename files editing their names in dired buffers"
    :tag "builtin"
    :added "2020-11-21"
    :require t
    :config
    (define-key dired-mode-map "r" 'wdired-change-to-wdired-mode)
    :bind ((wdired-mode-map
            ("C-o" . toggle-input-method))))
#+end_src

#+RESULTS:
: wdired

** macrostep

- elispã®ãƒã‚¯ãƒ­ã‚’å±•é–‹ã™ã‚‹

#+begin_src emacs-lisp
  (leaf macrostep
    :doc "interactive macro expander"
    :req "cl-lib-0.5"
    :tag "debugging" "macro" "languages" "lisp"
    :url "https://github.com/joddie/macrostep"
    :package t
    :bind (("C-c e" . macrostep-expand)))
#+end_src

#+RESULTS:
: macrostep

** recentf
- recentf-modeã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¤‰æ•°ã«ã§ãã‚‹

#+begin_src emacs-lisp
  (leaf recentf
    :custom
    (recentf-max-saved-items . 2000)
    (recentf-auto-cleanup quote never)
    (recentf-exclude quote
                     ("/recentf" "COMMIT_EDITMSG" "/.?TAGS" "^/sudo:"))
    :config
    (setq recentf-auto-save-timer
          (run-with-idle-timer 30 t (lambda () (let ((save-silently t)) (recentf-save-list)))))
    (recentf-mode 1))
#+end_src

#+RESULTS:
: recentf

** midnight - ä¸€å®šæœŸé–“ä½¿ç”¨ã—ãªã‹ã£ãŸ buffer ã‚’è‡ªå‹•å‰Šé™¤
- ä½¿ã„æ–¹ã€ã“ã‚Œã§ã„ã„ã®ã‹ãªï¼Ÿ
- [[https://uwabami.github.io/cc-env/Emacs.html][midnight: ä¸€å®šæœŸé–“ä½¿ç”¨ã—ãªã‹ã£ãŸ buffer ã‚’è‡ªå‹•å‰Šé™¤]]

#+begin_src emacs-lisp
  (leaf midnight
    :custom
    ((clean-buffer-list-delay-general . 1))
    :hook
    (emacs-startup-hook . midnight-mode))
#+end_src

#+RESULTS:
: midnight

** which-key - ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®ã‚¬ã‚¤ãƒ‰è¡¨ç¤º                              :draft:
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-10 23:59:23]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp
:ID:       o2b:f8c43d20-c1e2-4009-961f-48178cde8c6b
:POST_DATE: [2021-11-11 Thu 00:23]
:POSTID:   344
:END:

Emacsã§ã¯ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚„Altã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ä¸€æ–‡å­—æ‰“ã£ã¦ã€æ›´ã«ã‚‚ã†ä¸€æ–‡å­—æ‰“ã¤ã¨ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€ã¨ã„ã†æ“ä½œãŒåŸºæœ¬ã§ã™ã€‚

ã“ã®ã‚­ãƒ¼æ“ä½œã®çµ„ã¿åˆã‚ã›ã€æ…£ã‚Œã‚Œã°æ‰‹ãŒè¦šãˆã¦ã€è‡ªç„¶ã«æ“ä½œã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚‚ã®ã§ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã€è¦šãˆã‚‹ã¾ã§ã¯å¤§å¤‰ã§ã™ã€‚ç‰¹ã«åˆå¿ƒè€…ã«ã¨ã£ã¦ã¯ã„ã¡ã„ã¡èª¿ã¹ã‚‹ã®ã‚‚ã‚„ã£ã‹ã„ã§ã™ã€‚

which-keyãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã“ã®è² æ‹…ã‚’å¹¾åˆ†ã€è»½æ¸›ã—ã¦ãã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯C-x C-sã§ã™ã€‚ã§ã™ãŒã“ã‚Œã‚’å¿˜ã‚Œã¦ã€ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ã¨ãã¯C-xã‚’æ‰“ã£ã¦ã‹ã‚‰ã€ä½•ã‚’æ‰“ã¤ã‚“ã ã£ã‘ï¼Ÿã€ã¨ã„ã£ãŸã¨ãã€ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæœ‰åŠ¹ã§ã™ã€‚

C-xã‚’æ‰“ã£ã¦å…¥åŠ›ã‚’ã‚„ã‚ã‚‹ã¨ã€ç”»é¢ã«ãã®å…ˆã«æ‰“ã¤æ–‡å­—ã¨ãã‚Œã«å¯¾å¿œã—ãŸã‚³ãƒãƒ³ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¦ãã‚Œã¾ã™ã€‚

ã¨ã¦ã‚‚ä¾¿åˆ©ï¼ãƒ»ãƒ»ãƒ»ã¨è¨€ã„ãŸã„ã¨ã“ã‚ã§ã™ãŒã€çµå±€ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«å‡ºã¦ãã‚‹ã‚³ãƒãƒ³ãƒ‰ã®æ•°ãã®ã‚‚ã®ãŒå¤šã„ã®ã§ã€ä¸€è¦§ã®ä¸­ã‹ã‚‰ç›®çš„ã®ã‚‚ã®ã‚’è¦‹ã¤ã‘ã‚‹ã®ã‚‚ä¸€è‹¦åŠ´ã§ã‚ã£ãŸã‚Šã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€é¸æŠè‚¢ãŒå°‘ãªã„å ´åˆã¯å¤§åŠ©ã‹ã‚Šã§ã™ã€‚

ãªã‹ãªã‹Emacsã®ã‚­ãƒ¼æ“ä½œãŒè¦šãˆã‚‰ã‚Œãªã„ã‚ˆã€ã¨ã„ã†å ´åˆã¯è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

#+begin_src emacs-lisp
  (leaf which-key
    :doc "Display available keybindings in popup"
    :req "emacs-24.4"
    :tag "emacs>=24.4"
    :url "https://github.com/justbur/emacs-which-key"
    :added "2021-10-20"
    :emacs>= 24.4
    :ensure t
    :config
    (which-key-mode))
#+end_src

#+RESULTS:
: which-key

** imenu-list

#+begin_src emacs-lisp
  (leaf *imenu-list
    :bind (("C-^" . imenu-list-smart-toggle)))
#+end_src

#+RESULTS:
: *imenu-list

** align - ã‚³ãƒ¡ãƒ³ãƒˆã®ä½ç½®ã‚’æƒãˆãŸã‚Šã™ã‚‹

#+begin_src emacs-lisp
  (leaf align
    :doc "align text to a specific column, by regexp"
    :tag "builtin"
    :added "2021-10-30"
    :bind (("C-c M-a" . align-regexp))
    )
#+end_src

#+RESULTS:
: align

** outline-minnor-mode - ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ãƒã‚¤ãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®è¨­å®š
+ outline-modeã®ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯C-c C-oã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ç†ç”±ã¯æŒ‡ãŒæ…£ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚org-open-at-pointã¨ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ãŒã€ãã‚‚ãã‚‚outline-minnor-modeã¨org-modeã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã¯ãªã„ã®ã§æ°—ã«ã—ãªã„ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
  (leaf outline-minor-mode
    :config
    (add-hook 'outline-minor-mode-hook
              (lambda () (local-set-key "\C-c\C-o"
                                        outline-mode-prefix-map))))
#+end_src

#+RESULTS:
: outline-minor-mode

* ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡è£œå®ŒUIé–¢é€£ã®è¨­å®š
** vertico:æœ¬ä½“ã®è¨­å®š

- [[https://github.com/minad/vertico/][GitHub - minad/vertico: vertico.el - VERTical Interactive COmpletion]]

#+begin_src emacs-lisp
  (leaf vertico
    :straight t
    :custom
    ;; æœ€å¤§20ä»¶ã¾ã§è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«
    (vertico-count . 20)
    :config
    (vertico-mode)
    (setq vertico-resize t)
    (setq vertico-cycle t)
    )
#+end_src

#+RESULTS:
: vertico

** orderless
- [[https://github.com/oantolin/orderless][GitHub - oantolin/orderless: Emacs completion style that matches multiple regexps in any order]]

#+begin_src emacs-lisp
  (leaf orderless
    :straight t
    :init
    ;; Configure a custom style dispatcher (see the Consult wiki)
    ;; (setq orderless-style-dispatchers '(+orderless-dispatch))
    (setq completion-styles '(orderless)
          completion-category-defaults nil
          completion-category-overrides '((file (styles partial-completion)))))
#+end_src

#+RESULTS:
: orderless

** savehist

#+begin_src emacs-lisp
  ;; Persist history over Emacs restarts. Vertico sorts by history position.
  (leaf savehist
    :straight t
    :init
    (savehist-mode))
#+end_src

#+RESULTS:
: savehist

** Marginalia
- [[https://github.com/minad/marginalia][GitHub - minad/marginalia: marginalia.el - Marginalia in the minibuffer]]
- Enable richer annotations using the Marginalia package

#+begin_src emacs-lisp
  (leaf marginalia
    :straight t
    :bind (:minibuffer-local-map
           ("M-A" . marginalia-cycle))
    :init
    (marginalia-mode))
#+end_src

#+RESULTS:
: marginalia

** embark - ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã«ã‚ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã«å¯¾ã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œï¼ˆorg linkå¯¾å¿œï¼‰ :PBLISHED:
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-20 19:03:55]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp, embark
:ID:       o2b:ee0b1a39-a8d8-494b-9e7d-02d794982f19
:POST_DATE: [2021-11-20 Sat 19:03]
:POSTID:   363
:END:

*** ã€Œä½•ã‹ã€ã«å¯¾ã—ã¦ä½•ã‹ã‚’ã€Œå®Ÿè¡Œã€ã™ã‚‹embark
ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ã¦ã‚ã‚‹URLã‚’é–‹ããŸã„ã€ã¨æ€ã£ãŸã¨ãã€ã‚ãªãŸã¯ã©ã†ã—ã¾ã™ã‹ï¼Ÿ

ä»Šã©ãã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã¯URLã‚„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ã‚’èªè­˜ã—ã€ãƒªãƒ³ã‚¯ã¨ã—ã¦è¡¨ç¤ºã—ã¦ãã‚Œã¾ã™ã­ã€‚ã“ã®ãƒªãƒ³ã‚¯ã‚’é–‹ãã«ã¯ã€ãƒªãƒ³ã‚¯ã«ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã‚ã¦ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã®ãŒæ™®é€šã§ã™ã€‚

Emacsã§ã‚‚ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ã¯åŒã˜ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ï¼ˆorgãƒ¢ãƒ¼ãƒ‰ãªã©ï¼‰ã€‚ã“ã®éš›ã€ãƒã‚¦ã‚¹ã§ã¯ãªãã¦ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã‚‚é–‹ãã“ã¨ãŒã§ãã¾ã™ã€‚orgãƒ¢ãƒ¼ãƒ‰ã§ã™ã¨ã€ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒªãƒ³ã‚¯ã®ä¸Šã«ç§»å‹•ã•ã›ã€C-c C-oã§é–‹ã‘ã¾ã™ã€‚org-open-at-pointã¨ã„ã†é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ãƒªãƒ³ã‚¯ã¯URLã‚„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã ã‘ã§ãªãã€ä»–ã®orgãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‚ç…§ã‚„ã€è„šæ³¨ãŒã‚ã‚Šã¾ã™ã€‚

ã•ã¦ã€è©±ã‚’ã‚ˆã‚Šä¸€èˆ¬çš„ã«ã—ã¦ã€Œã„ã¾ã‚«ãƒ¼ã‚½ãƒ«ã®ä½ç½®ã«ã‚ã‚‹ä½•ã‹ã€ã«å¯¾ã—ã¦ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚’è¡Œã†ã“ã¨ã‚’ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€embark[fn:embark]ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã€‚ã€ŒURLã‚’é–‹ãã€ã¨ã„ã†ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã ã‘ã§ãªãã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã‚’é–‹ãã€ãƒ˜ãƒ«ãƒ—ã‚’èª¿ã¹ã‚‹ãªã©æ§˜ã€…ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

ä½•ã‹ã‚’ã—ãŸã„ï¼ˆex URLã‚’é–‹ãã€ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã‚’å‚ç…§ã™ã‚‹ã€ç­‰ï¼‰æ–‡å­—åˆ—ãŒã‚ã‚Œã°ãã“ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã‚‚ã£ã¦ã„ãã€embark-actï¼ˆç§ã¯M-.ã«è¨­å®šï¼‰ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚ãã†ã™ã‚Œã°ã€ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã€å®Ÿè¡Œã—ãŸã„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠã§ãã¾ã™ã€‚

ã¾ãŸã€ embark-dwim ï¼ˆC-.ã«è¨­å®šï¼‰ã‚’æŠ¼ã™ã¨embarkãŒãŠã™ã™ã‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸ã‚“ã§å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚ãªãŠã€dwimã¨ã¯do what i meanã®ç•¥ã§ã€ã€Œç§ã®æ„å›³ã™ã‚‹ã¨ã“ã‚ã‚’ï¼ˆå¯Ÿã—ã¦ï¼‰è¡Œãˆã€ã¨ã„ã£ãŸæ„å‘³ã§ã—ã‚‡ã†ã‹ã€‚æ„è¨³ã™ã‚Œã°ã€ã€Œé©å½“ã«ã‚ˆã‚ã—ãã€ã¿ãŸã„ãªã‚‚ã®ã‹ãªã€‚

*** org linkã‚’è¾¿ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹å½“ãŸã‚‰ãªã„!
ã•ã¦ã€ã“ã®ä¾¿åˆ©ãªembarkã€ã¨ã¦ã‚‚ä¸æ€è­°ãªã“ã¨ã«ã€orgã®ãƒªãƒ³ã‚¯ã‚’æ‰±ã†ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹å½“ãŸã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚çµæ§‹ã€ã„ã‚ã„ã‚æ¤œç´¢ã—ã¦è¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ã€ã€Œãªã„ç†ç”±ãŒåˆ†ã‹ã‚‰ãªã„è‡ªåˆ†ã®ã»ã†ãŒå¤‰ãªã®ã‹ã‚‚ã€ã¨ã‚‚æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚

ã¾ã‚ã€ã¨ã¯ã„ãˆã€ã‚ã£ã¦ã‚‚ã ã‚Œã‚‚å›°ã‚‰ãªã„ã¨ã‚‚æ€ã†ã®ã§ã€è‡ªåˆ†ã§ä½œã‚Šã¾ã—ãŸã€‚orgãƒ¢ãƒ¼ãƒ‰ã¨ã€ã‚‚ã¡ã‚ã‚“ã€embarkã«ä¾å­˜ã™ã‚‹ã®ã§ã€leafã§è¨­å®šã‚’ã—ã¦ã„ã¾ã™ã€‚

#+NAME: my-embark-orglink
#+begin_src emacs-lisp :syntaxhl :tangle no
  (leaf *my-embark-orglink
    :after org embark
    :config
    (defun my-embark-orglink-at-point ()
      "Target a link at point of orglink."
      (save-excursion
        (let* ((cur (point))
               (beg (progn (search-backward "[" nil t) (point)))
               (end (progn (search-forward  "]" nil t) (point)))
               (str (buffer-substring-no-properties beg end)))
          (when (and (<= beg cur) (<= cur end))
            (save-match-data
              (when (string-match "\\(\\[.+\\]\\)" str)
                `(orglink
                  ,(format "%s" (match-string 1 str))
                  ,beg . ,end)))))))
    (add-to-list 'embark-target-finders 'my-embark-orglink-at-point)
    (embark-define-keymap embark-orglink-map
      "Orglink keymap"
      ("RET" org-open-at-point)
      ("o" org-open-at-point))
    (add-to-list 'embark-keymap-alist '(orglink . embark-orglink-map)))
#+end_src

#+RESULTS: my-embark-orglink
: *my-embark-orglink

*** å…¨ä½“ã®è¨­å®š
ã›ã£ã‹ãã§ã™ã®ã§ã€è¨­å®šå…¨ä½“ã‚‚æ²è¼‰ã—ã¦ãŠãã¾ã™ã­ã€‚ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«ä½¿ã£ã¦ã„ã‚‹C-@ã§ã™ãŒãƒ˜ãƒ«ãƒ—ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§ã™ã€‚ç§ã¯C-hã‚’BSã«ã—ã¦ã„ã‚‹ã®ã§ã€C-@ã‚’ãƒ˜ãƒ«ãƒ—ï¼ˆã‚‚ã¨ã‚‚ã¨ã®C-hã®æ©Ÿèƒ½ï¼‰ã«ã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp :syntaxhl :noweb yes
  (leaf embark
    :straight t
    :bind
    (("M-." . embark-act)
     ("C-." . embark-dwim)
     ("C-@ B" . embark-bindings) ;; C-h -> C-@ ã«ã—ã¦ã„ã¾ã™
     )
    :init
    (setq prefix-help-command #'embark-prefix-help-command)
    :config
    (add-to-list 'display-buffer-alist
                 '("\\`\\*Embark Collect \\(Live\\|Completions\\)\\*"
                   nil
                   (window-parameters (mode-line-format . none))))
    :config
    <<my-embark-orglink>>)
#+end_src

#+RESULTS:
: embark

*** é–‘è©±ä¼‘é¡Œ
æ¢ã›ã°ã©ã“ã‹ã«å¿…ãšã‚ã‚‹ã¯ãšã ã€ã¨æ€ã£ã¦æ¢ã—ãŸã‚‚ã®ãŒã©ã†ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãªã„ã¨ãã€ã€Œã‚ã‚‹ã¯ãšã ã€ã¨æ€ã£ãŸè‡ªåˆ†ãŒé–“é•ã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã€ã¨ã‚‚æ€ã£ã¦ã—ã¾ã†ã®ã¯ã€è‡ªåˆ†ã®å¼±ã•ãªã®ã§ã—ã‚‡ã†ã‹ã€‚

ã¨ã“ã‚ã§ã€embarkã¨ã¯ã€ŒEmacs Mini-Buffer Actions Rooted in Keymapsã€ã®é ­æ–‡å­—ã‚’å–ã£ã¦åä»˜ã‘ãŸã‚ˆã†ã§ã™ã€‚ã‚­ãƒ¼ãƒãƒƒãƒ—ã«åŸºã¥ããƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã§è¡Œã†ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨ã„ã£ãŸæ„å‘³ã«ãªã‚Šã¾ã™ãŒã€ã‚‚ã¨ã‚‚ã¨ embark ã¯è‹±èªã§ã€Œä¹—èˆ¹ã™ã‚‹ã€ã¨ã„ã†å˜èªã§ã™ã€‚ãªã‹ãªã‹ãŠã—ã‚ƒã‚Œãªãƒãƒ¼ãƒŸãƒ³ã‚°ãªã®ã§ã™ã­ã€‚

[fn:embark] [[https://github.com/oantolin/embark][GitHub - oantolin/embark: Emacs Mini-Buffer Actions Rooted in Keymaps]]

*** COMMENT å‚™è€ƒ
- é–¢ä¿‚ãªã„ã‘ã©æ­£è¦è¡¨ç¾ã‚’è©¦ã™ã«ã¯
  - [[https://koseki.hatenablog.com/entry/20110710/emacsReBuilder][Emacsã®æ­£è¦è¡¨ç¾ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ re-builder ã¨ã‚„ã‚„ã“ã—ã„ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥å•é¡Œã«ã¤ã„ã¦ã€‚ - ã“ã›ãã®æŠ€è¡“æ—¥è¨˜]]

- æœ¬å½“ã¯orgã‚’ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‰å®Ÿè¡Œã™ã¹ã
(org-thing-at-point)ãŒä½¿ãˆãªã„ï¼Ÿnilã‚’è¿”ã—ã¦ãã‚‹

- emberkã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚­ãƒ¼ãƒãƒƒãƒ—ã§å®šç¾©
  - embark-url-map
  - embark-general-map

** consult
- [[https://github.com/minad/consult][GitHub - minad/consult: consult.el - Consulting completing-read]]

#+begin_src emacs-lisp
  ;; Example configuration for Consult
  (leaf consult
    :straight t
    ;; Replace bindings. Lazily loaded due by `use-package'.
    :bind (;; C-c bindings (mode-specific-map)
           ("C-c h" . consult-history)
           ("C-c m" . consult-mode-command)
           ;; ("C-c b" . consult-bookmark)
           ("C-c k" . consult-kmacro)
           ;; ("C-c r" . consult-recent-file)
           ;; C-x bindings (ctl-x-map)
           ("C-x M-:" . consult-complex-command)     ;; orig. repeat-complex-command
           ("C-x b" . consult-buffer)                ;; orig. switch-to-buffer
           ("C-x 4 b" . consult-buffer-other-window) ;; orig. switch-to-buffer-other-window
           ("C-x 5 b" . consult-buffer-other-frame)  ;; orig. switch-to-buffer-other-frame
           ;; Custom M-# bindings for fast register access
           ("M-#" . consult-register-load)
           ("M-'" . consult-register-store)          ;; orig. abbrev-prefix-mark (unrelated)
           ("C-M-#" . consult-register)
           ;; Other custom bindings
           ("M-y" . consult-yank-pop)                ;; orig. yank-pop
           ("<help> a" . consult-apropos)            ;; orig. apropos-command
           ;; M-g bindings (goto-map)
           ("M-g e" . consult-compile-error)
           ("M-g f" . consult-flymake)               ;; Alternative: consult-flycheck
           ("M-g g" . consult-goto-line)             ;; orig. goto-line
           ("M-g M-g" . consult-goto-line)           ;; orig. goto-line
           ("M-g o" . consult-outline)               ;; Alternative: consult-org-heading
           ("M-g m" . consult-mark)
           ("M-g k" . consult-global-mark)
           ("M-g i" . consult-imenu)
           ("M-g I" . consult-imenu-multi)
           ;; M-s bindings (search-map)
           ("M-s f" . consult-find)
           ("M-s F" . consult-locate)
           ("M-s g" . consult-grep)
           ("M-s G" . consult-git-grep)
           ("M-s r" . consult-ripgrep)
           ("M-s l" . consult-line)
           ("M-s L" . consult-line-multi)
           ("M-s m" . consult-multi-occur)
           ("M-s k" . consult-keep-lines)
           ("M-s u" . consult-focus-lines)
           ;; Isearch integration
           ("M-s e" . consult-isearch)
           (:isearch-mode-map
            ("M-e" . consult-isearch)                 ;; orig. isearch-edit-string
            ("M-s e" . consult-isearch)               ;; orig. isearch-edit-string
            ("M-s l" . consult-line)                  ;; needed by consult-line to detect isearch
            ("M-s L" . consult-line-multi)))           ;; needed by consult-line to detect isearch

    ;; Enable automatic preview at point in the *Completions* buffer.
    ;; This is relevant when you use the default completion UI,
    ;; and not necessary for Vertico, Selectrum, etc.
    :hook (completion-list-mode . consult-preview-at-point-mode)

    ;; The :init configuration is always executed (Not lazy)
    :init

    ;; Optionally configure the register formatting. This improves the register
    ;; preview for `consult-register', `consult-register-load',
    ;; `consult-register-store' and the Emacs built-ins.
    (setq register-preview-delay 0
          register-preview-function #'consult-register-format)

    ;; Optionally tweak the register preview window.
    ;; This adds thin lines, sorting and hides the mode line of the window.
    (advice-add #'register-preview :override #'consult-register-window)

    ;; Optionally replace `completing-read-multiple' with an enhanced version.
    (advice-add #'completing-read-multiple :override #'consult-completing-read-multiple)

    ;; Use Consult to select xref locations with preview
    (setq xref-show-xrefs-function #'consult-xref
          xref-show-definitions-function #'consult-xref)

    ;; Configure other variables and modes in the :config section,
    ;; after lazily loading the package.
    :config

    ;; Optionally configure preview. The default value
    ;; is 'any, such that any key triggers the preview.
    ;; (setq consult-preview-key 'any)
    ;; (setq consult-preview-key (kbd "M-."))
    ;; (setq consult-preview-key (list (kbd "<S-down>") (kbd "<S-up>")))
    ;; For some commands and buffer sources it is useful to configure the
    ;; :preview-key on a per-command basis using the `consult-customize' macro.
    (consult-customize
     consult-theme
     :preview-key '(:debounce 0.2 any)
     consult-ripgrep consult-git-grep consult-grep
     consult-bookmark consult-recent-file consult-xref
     consult--source-file consult--source-project-file consult--source-bookmark
     :preview-key (kbd "M-."))

    ;; Optionally configure the narrowing key.
    ;; Both < and C-+ work reasonably well.
    (setq consult-narrow-key "<") ;; (kbd "C-+")

    ;; Optionally make narrowing help available in the minibuffer.
    ;; You may want to use `embark-prefix-help-command' or which-key instead.
    ;; (define-key consult-narrow-map (vconcat consult-narrow-key "?") #'consult-narrow-help)

    ;; Optionally configure a function which returns the project root directory.
    ;; There are multiple reasonable alternatives to chose from.
    ;;;; 1. project.el (project-roots)
    (setq consult-project-root-function
          (lambda ()
            (when-let (project (project-current))
              (car (project-roots project)))))
    ;;;; 2. projectile.el (projectile-project-root)
    ;; (autoload 'projectile-project-root "projectile")
    ;; (setq consult-project-root-function #'projectile-project-root)
    ;;;; 3. vc.el (vc-root-dir)
    ;; (setq consult-project-root-function #'vc-root-dir)
    ;;;; 4. locate-dominating-file
    ;; (setq consult-project-root-function (lambda () (locate-dominating-file "." ".git")))
    )
#+end_src

#+RESULTS:
: consult

** embark-consult

#+begin_src emacs-lisp
  ;; Consult users will also want the embark-consult package.
  (leaf embark-consult
    :straight t
    :after (embark consult)
    ;; :demand t ; only necessary if you have the hook below
    ;; if you want to have consult previews as you move around an
    ;; auto-updating embark collect buffer
    :hook
    (embark-collect-mode . consult-preview-at-point-mode)
    )
#+end_src

#+RESULTS:
: embark-consult

* org-modeé–¢é€£ã®è¨­å®š
** orgã®ãŸã‚ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­å®š
- org-agenda-filesã®ãƒªã‚¹ãƒˆã«Dropboxã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ ã—ã¦ãŠãã€‚
  - ã“ã®ä¸­ã«ã‚ã‚‹orgãƒ•ã‚¡ã‚¤ãƒ«ãŒã™ã¹ã¦agendaã«åæ˜ ã•ã‚Œã‚‹ã€‚
- org-num-modeã‚’ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿè¡Œã™ã‚‹
  - (org-startup-numerated . t)ãŒã†ã¾ãåæ˜ ã•ã‚Œãªã„ã€‚
- Androdç«¯æœ«ã‹ã‚‰åˆ©ç”¨ã™ã‚‹ã«ã¯ [[https://play.google.com/store/apps/details?id=com.orgzly][Orgzly]] ãŒè‰¯ã•ãã†ã€‚

- è¨­å®šã™ã‚‹ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ•ã‚¡ã‚¤ãƒ«

  | ãƒ•ã‚¡ã‚¤ãƒ«          | å†…å®¹                           |
  |-------------------+--------------------------------|
  | Journal.org       | æ€ã„ã¤ãã€ãƒ¡ãƒ¢ã‚’æ›¸ããªãã‚Šç”¨   |
  | Notebook.org      | ã‚ã‚‹ç¨‹åº¦ãã¡ã‚“ã¨ã—ãŸãƒ¡ãƒ¢æ›¸ã   |
  | ãƒ–ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«    | ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ã‚’ã¾ã¨ã‚ãŸãƒ•ã‚¡ã‚¤ãƒ« |
  | emacsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ« | orgãƒ•ã‚¡ã‚¤ãƒ«ã§æ›¸ã„ãŸEmacsã®è¨­å®š |

  - TODOã¯ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ã¦è‰¯ã„
  - org-switchbã‹consult-org-agendaã‚’ã©ã“ã‹ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã¨ã„ã„ã‹ã‚‚ï¼Ÿï¼ˆC-,ï¼‰
    - C-c bã«ãƒã‚¤ãƒ³ãƒ‰
** org-modeã®è¨­å®š

+ TODOã‚’MAYBE NEXT STARED WAITING DLEGATEDãªã©åˆ†ã‘ã¦ã‚‚ã‚ˆã„ãŒã€TODOã«å„ªå…ˆåº¦#A #B #Cã‚’ã¤ã‘ã‚‹ã»ã†ãŒã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãŒè¦‹ã‚„ã™ããªã‚‹

+ è¦‹å‡ºã—ã‚’æŠ˜ã‚ŠãŸãŸã‚“ã ã¨ãã®...ã‚’å¤‰æ›´
  * [[https://endlessparentheses.com/changing-the-org-mode-ellipsis.html][Changing the org-mode ellipsis Â· Endless Parentheses]]

#+begin_src emacs-lisp
  (leaf org-mode
    :bind
    (("C-c l" . org-store-link)
     ("C-c a" . org-agenda)
     ("C-c c" . org-capture)
     ("C-c j" . (lambda () (interactive) (org-capture nil "j"))))
    :hook (org-mode-hook . visual-fill-column-mode)
    :custom
    (org-directory . "~/Dropbox/Org/")
    (org-default-notes-file . "~/Dropbox/Org/Notebook.org")
    (org-agenda-files . '("~/Dropbox/Org/"
                          "~/git/ploversky-zenn.dev/plaversky@zenn.dev.org"
                          "~/git/ploversky-ploversky.net/plaversky.net.org"
                          "~/.emacs.d/README.org"
                          "~/Dropbox/Org/gcal/"
                          ))
    (org-todo-keyword-faces
     . '(("NEXT" . (:foreground "blue" :underline t))
         ("DONE" . (:foreground "pale green"))))
    (org-todo-keywords . '((sequence "TODO" "NEXT" "|" "DONE" "SOMEDAY")))
    (org-refile-targets . '((org-agenda-files :tag . "REFILE")))
    (org-startup-truncated . nil)
    (org-return-follows-link  . t) ; RET/C-mã§ãƒªãƒ³ã‚¯ã‚’é–‹ã
    (org-agenda-start-with-follow-mode . t) ; ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ã§é–¢é€£ã™ã‚‹orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
    (org-ellipsis . " â–½") ; â€¦,â–¼, â†´, â¬, â¤·, â‹±
    )
#+end_src

#+RESULTS:
: org-mode

** doctã‚’åˆ©ç”¨ã—ãŸorg-captureã®è¨­å®š

- [[https://orgmode.org/manual/Capture-templates.html][Capture templates (The Org Manual)]]
- [[https://www.5ing-myway.com/org-capture/][org-captureã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã€ã™ã°ã‚„ããƒ¡ãƒ¢ã‚’å–ã‚‹æ–¹æ³• | è¶£å‘³ã«ç”Ÿãã‚‹ã€‚]]

- ãƒ•ã‚¡ã‚¤ãƒ«ã¯ org-directory ä»¥ä¸‹ã«ã‚ã‚‹ã€‚

- [[https://github.com/progfolio/doct#installation][GitHub - progfolio/doct: DOCT: Declarative Org Capture Templates for Emacs]]
- ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã§æ—¥æœ¬èªãŒå…¥åŠ›ã§ããªã„
- [[https://blog.tomoya.dev/posts/a-new-wave-has-arrived-at-emacs/][Emacsã®æ¬¡ä¸–ä»£ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡è£œå®ŒUI | æ—¥ã€…ã€ã¨ã‚“ã¯èªã‚‹ã€‚]]

#+begin_src emacs-lisp
  (leaf doct
    :ensure t
    ;;recommended: defer until calling doct
                                          ;:commands (doct)
    :config
    (setq org-capture-templates
          (doct '(("Journal" :keys "j"
                   :empty-lines-after 1
                   :file "~/Dropbox/Org/Journal.org"
                   :datetree t
                   :todo-state "TODO"
                   :template ("* %{todo-state} %?"
                              ":PROPERTIES:"
                              ":CREATED: %U"
                              ":ANNOTADED: %a"
                              ":END:"))
                  ("Notebook" :keys "n"
                   :prepend t
                   :empty-lines-after 1
                   :file "~/Dropbox/Org/Notebook.org"
                   :unnarrowed t
                   :template ("* %^{Description}"
                              ":PROPERTIES:"
                              ":CREATED: %T"
                              ":END:"
                              "\n%?"))
                  ("Blog" :keys "b"
                   :prepend t
                   :empty-lines-after 1
                   :unnarrowed t
                   :children
                   (("ploversky@zenn.dev" :keys "z"
                     :file "~/git/ploversky-zenn.dev/plaversky@zenn.dev.org"
                     :headline   "è¨˜äº‹"
                     :todo-state "TODO"
                     :export_file_name (lambda () (concat (format-time-string "%Y%m%d-%H%M%S")))
                     :template ("* %{todo-state} %^{Description}"
                                ":PROPERTIES:"
                                ":CREATED: %T"
                                ":EXPORT_FILE_NAME: articles/%{export_file_name}"
                                ":EXPORT_GFM_TAGS: blog"
                                ":EXPORT_GFM_CUSTOM_FRONT_MATTER: :emoji ğŸ‘©â€ğŸ’»"
                                ":EXPORT_GFM_CUSTOM_FRONT_MATTER+: :type tech"
                                ":EXPORT_GFM_CUSTOM_FRONT_MATTER+: :published false"
                                ":END:"
                                "\n** %?"))
                    ("ploversky.net" :keys "w"
                     :file "~/git/ploversky-ploversky.net/plaversky.net.org"
                     :headline   "Blog"
                     :todo-state "TODO"
                     :template ("* %{todo-state} %^{Description}"
                                ":PROPERTIES:"
                                ":CREATED: %T"
                                ":CATEGORY: Blog"
                                ":POST_TAGS: Blog"
                                ":BLOG:     plover"
                                ":END:"
                                "\n** %?"))
                    ("blog.chubachi.net"  :keys "b"
                     :file "~/git/ychubachi.github.io/blog.chubachi.net.org"
                     :headline   "Blog"
                     :todo-state "TODO"
                     :export_file_name (lambda () (concat (format-time-string "%Y%m%d-%H%M%S")))
                     :template ("* %{todo-state} %^{Description}"
                                ":PROPERTIES:"
                                ":CREATED: %T"
                                ":EXPORT_FILE_NAME: %{export_file_name}"
                                ":EXPORT_DATE: %U"
                                ":END:"
                                "\n** %?"))
                    )
                   )
                  )
                )
          )
    )
#+end_src

#+RESULTS:
: doct

** org-tempo - ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å…¥åŠ›ã®çœåŠ›åŒ–
   - "<el"+<TAB> ç­‰ã§emacs-lispã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ãŒã§ã‚‹ã‚ˆã†ã«è¨­å®šã€‚

#+begin_src emacs-lisp
  (leaf org-tempo
    :require t
    :config
    (add-to-list 'org-structure-template-alist
                 '("el" . "src emacs-lisp"))
    (add-to-list 'org-structure-template-alist
                 '("bash" . "src bash"))
    )
#+end_src

#+RESULTS:
: org-tempo

** latexé–¢é€£
*** orgã§latexã®è¨­å®šä¾‹
    - è¡¨é¡Œãƒ»ç­†è€…ãƒ»æ—¥ä»˜ã®æ›¸ãæ–¹

    #+begin_comment
    #+TITLE: ã¨ã¦ã‚‚ç´ æ™´ã‚‰ã—ã„ç ”ç©¶ã®ç™ºè¡¨
    #+AUTHOR: ä¸­é‰¢ æ¬£ç§€, CHUBACHI Yoshihide
    #+DATE: 2021-08-06
    #+end_comment

    - ç›®æ¬¡ã‚’å‡ºåŠ›ã—ãªã„

    #+begin_comment
    #+OPTIONS: toc:nil # hoge
    #+end_comment

    - å‚è€ƒ
      - [[https://www-he.scphys.kyoto-u.ac.jp/member/shotakaha/dokuwiki/doku.php?id=toolbox:emacs:org:latex:start][Org-LaTeX [QumaWiki]]]
      - [[https://taipapamotohus.com/post/org-mode_paper_3/][Emacsã®org-modeã§è«–æ–‡ã‚’æ›¸ãï¼ˆãã®3ï¼šorg-modeã¨bibtexã¨reftexã®é€£æºã«ã‚ˆã‚‹æ–‡çŒ®å¼•ç”¨ã®è‡ªå‹•åŒ–ï¼‰ | A perfect autumn day]]

    #+begin_comment
#+LaTeX_CLASS: koma-jarticle
#+LaTeX_CLASS_OPTIONS: [12pt]
#+LATEX_HEADER: \usepackage{geometry}
#+LATEX_HEADER: \geometry{left=1in,right=1in,top=1in,bottom=1in}
#+LaTeX_HEADER: \usepackage[sort,compress,super,comma]{natbib}
#+STARTUP:  overview
#+STARTUP:  hidestars
#+OPTIONS:   H:4 num:nil toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+OPTIONS: date:nil
      #+end_comment

*** latexæœ¬ä½“
- [[https://texwiki.texjp.org/?Emacs%2FOrg%20mode#h20d131a][Emacs/Org mode - TeX Wiki]]
  - org-latex-pdf-process ã¯è¨˜è¼‰ã®é€šã‚Šã ã¨%Sç­‰ã‚’orgå´ã§ç½®æ›ã—ã‚ˆã†ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼
- latexmkã®è¨­å®šã¯~/.latexmkrcã«è¨˜è¿°
  - [[https://texwiki.texjp.org/?Latexmk#g2a2cf08][Latexmk - TeX Wiki]]
  - latexmkã®ç›¸æ€§ã®ã›ã„ã‹ã€org-export-in-backgroundã‚’tã«ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
- LaTeXã®æ–‡å­—åˆ—éƒ¨åˆ†ã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã®ãŒã‚ˆã„ã‹ã‚‚ã—ã‚Œãªã„
  - [[http://ergoemacs.org/emacs/elisp_read_file_content.html][Elisp: Read File Content as String or List of Lines]]

#+begin_src emacs-lisp
  (leaf ox-latex
    :require t
    :setq ((org-latex-default-class . "bxjsarticle")
           (org-latex-pdf-process . '("latexmk -gg -pdfdvi -pvc- %f")))
    :config
    (add-to-list
     'org-latex-classes
     '("bxjsarticle"
       "% begin org-latex-class bxjsarticle
    \\documentclass[autodetect-engine,dvi=dvipdfmx,11pt,a4paper,ja=standard]{bxjsarticle}
    [NO-DEFAULT-PACKAGES]
    \\usepackage{amsmath}
    \\usepackage{newtxtext,newtxmath}
    \\usepackage{graphicx}
    \\usepackage{hyperref}
    \\ifdefined\\kanjiskip
      \\usepackage{pxjahyper}
      \\hypersetup{colorlinks=true}
    \\else
      \\ifdefined\\XeTeXversion
          \\hypersetup{colorlinks=true}
      \\else
        \\ifdefined\\directlua
          \\hypersetup{pdfencoding=auto,colorlinks=true}
        \\else
          \\hypersetup{unicode,colorlinks=true}
        \\fi
      \\fi
    \\fi
    % end org-latex-class bxjsarticle"
       ("\\section{%s}" . "\\section*{%s}")
       ("\\subsection{%s}" . "\\subsection*{%s}")
       ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
       ("\\paragraph{%s}" . "\\paragraph*{%s}")
       ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
    (add-to-list
     'org-latex-classes
     '("jlreq"
       "% begin org-latex-class jlreq
  \\documentclass[11pt,paper=a4]{jlreq}
  [NO-DEFAULT-PACKAGES]
  \\usepackage{amsmath}
  \\usepackage{newtxtext,newtxmath}
  \\ifdefined\\kanjiskip
    \\usepackage[dvipdfmx]{graphicx}
    \\usepackage[dvipdfmx]{hyperref}
    \\usepackage{pxjahyper}
    \\hypersetup{colorlinks=true}
  \\else
    \\usepackage{graphicx}
    \\usepackage{hyperref}
    \\hypersetup{pdfencoding=auto,colorlinks=true}
  \\fi
  % end org-latex-class jlreq"
       ("\\section{%s}" . "\\section*{%s}")
       ("\\subsection{%s}" . "\\subsection*{%s}")
       ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
       ("\\paragraph{%s}" . "\\paragraph*{%s}")
       ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
    (add-to-list
     'org-latex-classes
     '("jlreq-tate"
       "% begin org-latex-class jlreq-tate
  \\documentclass[tate,11pt,paper=a4]{jlreq}
  [NO-DEFAULT-PACKAGES]
  \\usepackage{amsmath}
  \\usepackage{newtxtext,newtxmath}
  \\ifdefined\\kanjiskip
    \\usepackage[dvipdfmx]{graphicx}
    \\usepackage[dvipdfmx]{hyperref}
    \\usepackage{pxjahyper}
    \\hypersetup{colorlinks=true}
  \\else
    \\usepackage{graphicx}
    \\usepackage{hyperref}
    \\hypersetup{pdfencoding=auto,colorlinks=true}
  \\fi
  % end org-latex-class jlreq-tate"
       ("\\section{%s}" . "\\section*{%s}")
       ("\\subsection{%s}" . "\\subsection*{%s}")
       ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
       ("\\paragraph{%s}" . "\\paragraph*{%s}")
       ("\\subparagraph{%s}" . "\\subparagraph*{%s}"))))
#+end_src

#+RESULTS:
: ox-latex

*** ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã® pretty print
- Windowsã®å ´åˆ
  - scoopã§pygmentã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã
  - python ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ pip install pygments
  - PATHã®ç™»éŒ²
    - C:\Users\yc\scoop\apps\python\current\Scripts

  #+begin_src emacs-lisp
    (setq org-export-latex-listings t)

    (setq org-latex-listings 'minted)
    (setq org-latex-minted-options
          '(("frame" "lines")
            ("framesep=2mm")
            ("linenos=true")
            ("baselinestretch=1.2")
            ("fontsize=\\footnotesize")
            ("breaklines")
            ))

    (add-to-list 'org-latex-packages-alist "\\usepackage{minted}" t)
  #+end_src

  #+RESULTS:
  | \usepackage{minted} |

*** Beamer

- beamerã®ä½œæˆã¯ C-c C-e l P

#+begin_src emacs-lisp
  (require 'ox-beamer)
  (setq org-beamer-outline-frame-title "ç›®æ¬¡")
  (setq org-beamer-frame-default-options "t") ; ãƒ•ãƒ¬ãƒ¼ãƒ ã®ä½ç½®ã‚’topã«ã™ã‚‹ã€‚
#+end_src

*** å‚è€ƒæ–‡çŒ® RefTex-Mode
    - [[https://taipapamotohus.com/post/org-mode_paper_3/][Emacsã®org-modeã§è«–æ–‡ã‚’æ›¸ãï¼ˆãã®3ï¼šorg-modeã¨bibtexã¨reftexã®é€£æºã«ã‚ˆã‚‹æ–‡çŒ®å¼•ç”¨ã®è‡ªå‹•åŒ–ï¼‰ | A perfect autumn day]]
    - [[https://github.com/jkitchin/org-ref][jkitchin/org-ref: org-mode modules for citations, cross-references, bibliographies in org-mode and useful bibtex tools to go with it.]]
    - [[https://aliquote.org/post/org-and-bibtex/][Org and Bibtex - aliquote]]

    - org-refã¯Helmã«ä¾å­˜ã—ã¦ã„ã‚‹ã‚ˆã†ã 

      ;; (leaf org-ref
      ;;   :ensure t
      ;;   :require t
      ;;   :setq ((reftex-default-bibliography quote
      ;;                                       ("~/git/bibliography/references.bib"))

      ;;          (org-ref-bibliography-notes . "~/git/bibliography/notes.org")
      ;;          (org-ref-default-bibliography quote
      ;;                                        ("~/git/bibliography/references.bib"))
      ;;          (org-ref-pdf-directory . "~/git/bibliography/bibtex-pdfs/")

      ;;          (bibtex-completion-bibliography . "~/git/bibliography/references.bib")
      ;;          (bibtex-completion-library-path . "~/git/bibliography/bibtex-pdfs")
      ;;          (bibtex-completion-notes-path . "~/git/bibliography/helm-bibtex-notes")
      ;;          )
      ;;   :config
      ;;   (push '(migemo) helm-source-bibtex)

      ;;   ;; (define-key org-mode-map (kbd "C-c b c") `org-ref-helm-insert-cite-link)
      ;;   ;; (define-key org-mode-map (kbd "C-c b l") `org-ref-helm-insert-label-link)
      ;;   ;; (define-key org-mode-map (kbd "C-c b r") `org-ref-helm-insert-ref-link)
      ;;   )

#+begin_src emacs-lisp
  (leaf org-ref
    :package t
    :config
    (setq bibtex-completion-bibliography '("~/git/bibliography/references.bib")
          bibtex-completion-library-path '("~/git/bibliography/bibtex-pdfs/")
          bibtex-completion-notes-path "~/git/bibliography/notes/"
          bibtex-completion-notes-template-multiple-files "* ${author-or-editor}, ${title}, ${journal}, (${year}) :${=type=}: \n\nSee [[cite:&${=key=}]]\n"

          bibtex-completion-additional-search-fields '(keywords)
          bibtex-completion-display-formats
          '((article       . "${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*} ${journal:40}")
            (inbook        . "${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*} Chapter ${chapter:32}")
            (incollection  . "${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}")
            (inproceedings . "${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}")
            (t             . "${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}"))
          bibtex-completion-pdf-open-function
          (lambda (fpath)
            (call-process "open" nil 0 nil fpath))))
#+end_src

#+RESULTS:
: org-ref

#+begin_src emacs-lisp
  (leaf bibtex
    :require t
    :config
    (setq bibtex-autokey-year-length 4
            bibtex-autokey-name-year-separator "-"
            bibtex-autokey-year-title-separator "-"
            bibtex-autokey-titleword-separator "-"
            bibtex-autokey-titlewords 2
            bibtex-autokey-titlewords-stretch 1
            bibtex-autokey-titleword-length 5
            org-ref-bibtex-hydra-key-binding (kbd "H-b"))

    (define-key bibtex-mode-map (kbd "H-b") 'org-ref-bibtex-hydra/body))
#+end_src

#+RESULTS:
: bibtex


- org-ref-insert-cite-function = nil
- org-ref-insert-label-function = nil
- org-ref-insert-ref-function = nil

** babel - Grophviz (dot)

- dotã‚³ãƒ¼ãƒ‰ã®è©•ä¾¡ã‚’è¡Œã†ã‚ˆã†ã«ã™ã‚‹
#+begin_src emacs-lisp
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((dot . t))) ; this line activates dot
#+end_src

- babelã§è©•ä¾¡ã™ã‚‹ã¨ãã«ç¢ºèªã‚’å‡ºã•ãªã„
  - [[https://emacs.stackexchange.com/questions/23946/how-can-i-stop-the-confirmation-to-evaluate-source-code-when-exporting-to-html][org mode - How can I stop the confirmation to evaluate source code when exporting to html? - Emacs Stack Exchange]]

#+begin_src emacs-lisp
  (setq org-confirm-babel-evaluate nil)
#+end_src

- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è‡ªå‹•å†æç”»
  - [[https://emacs.stackexchange.com/questions/3302/live-refresh-of-inline-images-with-org-display-inline-images][org mode - live refresh of inline images with org-display-inline-images - Emacs Stack Exchange]]

#+begin_src emacs-lisp
(eval-after-load 'org
  (add-hook 'org-babel-after-execute-hook 'org-redisplay-inline-images))
#+end_src

#+RESULTS:

** ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚³ãƒãƒ³ãƒ‰

#+begin_src emacs-lisp
(setq org-use-speed-commands t)
#+end_src

#+RESULTS:
: t

** org2blog

#+begin_comment
- [[id:o2b:ee0b1a39-a8d8-494b-9e7d-02d794982f19][embark - ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã«ã‚ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã«å¯¾ã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ]]ã‚’
- org2blog-subtree-post-publishã™ã‚‹
- ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒå´©ã‚Œã¦ã„ã‚‹
- ä¸€æ—¦ã€Wordpressã§ç·¨é›†ã™ã‚‹ã¨ã€ã†ã¾ãã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚å…¥ã£ã¦ã„ã‚‹
- æ”¹ã‚ã¦å…¬é–‹ã™ã‚‹ã¨ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒä¹±ã‚Œã‚‹
- [[https://shop-hi-mall.com/wordpress-blank/][WordPressã®æ–‡é ­ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆç©ºç™½ï¼‰ãŒæ¶ˆãˆã‚‹åŸå› ã¨å¯¾å‡¦æ³•ã‚’è§£èª¬ï¼ - ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã‚¼ãƒŸ]]ã‚’ã¿ã¦[[https://wordpress.org/plugins/tinymce-advanced/][Advanced Editor Tools (previously TinyMCE Advanced) â€“ WordPress plugin | WordPress.org]]ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ä¸€æ—¦ã€ç·¨é›†ã—ã¦å†åº¦å…¬é–‹ã™ã‚‹ã¨ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒå‹•ä½œã™ã‚‹
#+end_comment

+ èª¬æ˜
  * orgã§Wordpressã«æŠ•ç¨¿ã™ã‚‹
  * Bufferå…¨ä½“ã§è¨˜äº‹ã‚’æ›¸ãå ´åˆ
    | ã‚­ãƒ¼næ“ä½œ | é–¢æ•°                         | èª¬æ˜                 |
    |-----------+------------------------------+----------------------|
    | C-c M-p g | org2blog-user-interface      | ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º         |
    | C-c M-p D | org2blog-buffer-page-save    | ãƒšãƒ¼ã‚¸ã‚’WPã«ä¿å­˜     |
    | C-c M-p P | org2blog-buffer-page-publish | ãƒšãƒ¼ã‚¸ã‚’å…¬é–‹         |
    | C-c M-p d | org2blog-buffer-post-save    | ãƒã‚¹ãƒˆã‚’WPã«ä¿å­˜     |
    | C-c M-p p | org2blog-buffer-post-publish | ãƒã‚¹ãƒˆã‚’å…¬é–‹         |
    | C-c M-p t | org2blog-complete            | ã‚«ãƒ†ã‚´ãƒªã‚„ã‚¿ã‚°ã®è£œå®Œ |

+ å‚è€ƒ
  * [[https://github.com/org2blog/org2blog#requirements-and-compatibility][org2blog/org2blog: Blog from Org mode to WordPress.]]
+ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯~/.netrcã«æ›¸ã

+ å‚™è€ƒ
  * ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆã§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿï¼ˆ2021-11-05ï¼‰
  * ã©ã†ã‚„ã‚‰ã‚³ãƒ¼ãƒ‰ã«`(backquote)ãŒ2ã¤ã‚ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚ˆã†ã ãƒ»ãƒ»ãƒ»
  * Wordpressã®xmlrpcã®å•é¡Œã‹ï¼Ÿã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼Ÿï¼Ÿ
    - ãƒ—ãƒ­ãƒã‚¤ãƒ€ã®WAFã®è¨­å®šã ã£ãŸ

#+begin_src emacs-lisp
  (leaf org2blog
    :ensure t
    :config
    (require 'auth-source)
    (let* ((credentials (auth-source-user-and-password "ploversky.net"))
           (username (nth 0 credentials))
           (password (nth 1 credentials))
           (config `("plover"
                     :url "https://ploversky.net/xmlrpc.php"
                     :username ,username
                     :password ,password)))
      (setq org2blog/wp-blog-alist `(,config)))
    (setq org2blog/wp-image-upload t)
    (setq org2blog/wp-show-post-in-browser 'show)
    (setq org2blog/wp-use-sourcecode-shortcode t)
    )
#+end_src

#+RESULTS:
: org2blog

** ox-hugo
- [[https://github.com/kaushalmodi/ox-hugo][GitHub - kaushalmodi/ox-hugo: A carefully crafted Org exporter back-end for Hugo]]

#+begin_src emacs-lisp
  (leaf ox-hugo
    :ensure t
    :require t
    :after ox)
#+end_src

#+RESULTS:
: ox-hugo

** org-superstar
  * org-bullets ã®é€²åŒ–ç‰ˆ
    + [[https://github.com/integral-dw/org-superstar-mode/blob/master/DEMO.org][org-superstar-mode/DEMO.org at master Â· integral-dw/org-superstar-mode Â· GitHub]]
  * asterisk
    + plus
      - minus

#+begin_src emacs-lisp
  (leaf org-superstar
    :ensure t
    :config
    (add-hook 'org-mode-hook (lambda nil (org-superstar-mode 1))))
#+end_src

#+RESULTS:
: org-superstar

** org-rome

- org-romeã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®è¨­å®š

#+begin_src emacs-lisp
  (leaf org-roam
    :ensure t
    :require t
    :custom
    (org-roam-directory . "~/Dropbox/Org/Roam/")
    (org-roam-completion-everywhere . t)
    (org-roam-capture-templates
     . '(("d" "default" plain
          "%?"
          :if-new (file+head "%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n")
          :unnarrowed t)
         ("m" "å‚™å¿˜éŒ²ï¼ˆMemoï¼‰" plain
          (file "~/Dropbox/Org/Roam/Templates/MemoTemplate.org")
          :if-new (file+head "%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n")
          :unnarrowed t)
         ("k" "ä¼šè­°éŒ²ï¼ˆMeetingï¼‰" plain
          (file "~/Dropbox/Org/Roam/Templates/MeetingTemplate.org")
          :if-new (file+head "%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n")
          :unnarrowed t)
         ("t" "æ–‡æ›¸ï¼ˆLaTeXï¼‰" plain
          (file "~/Dropbox/Org/Roam/Templates/LaTeXTemplate.org")
          :if-new (file+head "%<%Y%m%d%H%M%S>-${slug}.org" "#+title: ${title}\n")
          :unnarrowed t)
         ("w" "ãƒ–ãƒ­ã‚°ï¼ˆWordpressï¼‰" plain
          (file "~/Dropbox/Org/Roam/Templates/Org2blogBufferTemplate.org")
          :if-new (file+head "%<%Y%m%d%H%M%S>-${slug}.org" "#+TITLE: ${title}\n")
          :unnarrowed t)
         ))
    :bind (("C-c n l" . org-roam-buffer-toggle)
           ("C-c n f" . org-roam-node-find)
           ("C-c n g" . org-roam-graph)
           ("C-c n i" . org-roam-node-insert)
           ("C-c n c" . org-roam-capture)
           ;; Dailies
           ("C-c n j" . org-roam-dailies-capture-today))
    :init
    (setq org-roam-v2-ack t)
    :config
    (org-roam-db-autosync-mode)
    ;; If using org-roam-protocol
    (require 'org-roam-protocol))
#+end_src

#+RESULTS:
: org-roam

** ox-zenn - zenn.devã«ãƒ–ãƒ­ã‚°ã‚’æ›¸ã
*** å‚è€ƒ
+ [[https://zenn.dev/conao3/articles/ox-zenn-usage][org-modeãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰Zenn Flavored Markdownã‚’ç”Ÿæˆã™ã‚‹ox-zennã®ä½¿ã„æ–¹]]

#+begin_src emacs-lisp
  (leaf ox-zenn
    :ensure t
    :after org
    :require t ox-publish
  :defun zenn/f-parent org-publish
  :defvar org-publish-project-alist
  :preface
  (defvar zenn/org-dir "~/git/zenn-content")

  (defun zenn/org-publish (arg)
    "Publish zenn blog files."
    (interactive "P")
    (let ((force (or (equal '(4) arg) (equal '(64) arg)))
          (async (or (equal '(16) arg) (equal '(64) arg))))
      (org-publish "zenn" arg force async)))

  :config
  (setf
   (alist-get "zenn" org-publish-project-alist nil nil #'string=)
   (list
    :base-directory (expand-file-name "" zenn/org-dir)
    :base-extension "org"
    :publishing-directory (expand-file-name "../" zenn/org-dir)
    :recursive t
    :publishing-function 'org-zenn-publish-to-markdown)))
#+end_src

#+RESULTS:
: ox-zenn

** ox-pandoc - pandocã§orgãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆã‚’æ‹¡å¼µã™ã‚‹
+ [[https://github.com/kawabata/ox-pandoc][kawabata/ox-pandoc: Another org-mode exporter via pandoc.]]

#+begin_src emacs-lisp
  (leaf ox-pandoc :package t :require t)
#+end_src

#+RESULTS:
: ox-pandoc

** org-pomodoro - ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯
*** è¨­å®š

1. TODOã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’æ›¸ã
2. M-x org-pomodoroã§ã‚¿ã‚¤ãƒãƒ¼ã‚¹ã‚¿ãƒ¼ãƒˆ
3. C-c C-x o ã§ä¸€æ™‚åœæ­¢
4. C-c C-x TAB ã§å†é–‹
5. æ™‚é–“ãŒæ¥ã‚‹ã¨ã‚¢ãƒ©ãƒ¼ãƒ ï¼Ÿ

C-c oã§ã‚¿ã‚¤ãƒãƒ¼ãŒã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ã‚ˆã†è¨­å®šã—ã¾ã—ãŸã€‚

#+begin_src emacs-lisp
    (leaf org-pomodoro
      :package t
      :require t
      :bind (("C-c p" . org-pomodoro)))
#+end_src

#+RESULTS:
: org-pomodoro

*** å‚è€ƒ
+ [[https://fnwiya.hatenablog.com/entry/2016/01/11/203000][emacsã§ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼ˆorg-pomodoroï¼‰ - fnwiya's quine]]

** org-gcal - Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ã®é€£æº

https://github.com/kidd/org-gcal.el.git

#+begin_src emacs-lisp
  (leaf org-gcal
    :straight (org-gcal :type git :host github :repo "kidd/org-gcal.el")
    :require t
    :config
    (let* ((json-object-type 'hash-table)
           (json-array-type 'list)
           (json-key-type 'string)
           (gcal-json "~/Dropbox/Org/gcal/client_secret_357879820522-pnlalhj01143k1946fgp8ashshus9olg.apps.googleusercontent.com.json")
           (json (json-read-file gcal-json))
           (installed (gethash "installed" json))
           (client-id (gethash "client_id" installed))
           (client-secret (gethash "client_secret" installed)))
      (setq org-gcal-client-id client-id
            org-gcal-client-secret client-secret
            org-gcal-fetch-file-alist
            '(("yc@aiit.ac.jp" .  "~/Dropbox/Org/gcal/gcal-work.org")
              ("yoshihide.chubachi@gmail.com"
               .  "~/Dropbox/Org/gcal/gcal-private.org")))))
#+end_src

#+RESULTS:
: org-gcal

* å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
** swap-buffers
*** è¨­å®š

#+begin_src emacs-lisp
  (leaf swap-buffers
    :package t
    :bind
    ("C-c b" . swap-buffers)
    :custom
    (swap-buffers-qwerty-shortcuts
     . '("a" "o" "e" "u" "i" "d" "h" "t" "n" "s" "-")))
#+end_src

#+RESULTS:
: swap-buffers

*** å‚è€ƒ
+ [[http://emacs.rubikitch.com/swap-buffers/][swap-buffers.el : ã€å¤šåˆ†å‰²å¯¾å¿œã€‘ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’å…¥ã‚Œæ›¿ãˆã‚‹æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰]]
** backup-each-save - Emacsã§ä¿å­˜ã™ã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—     :PBLISHED:
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-20 21:43:40]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp
:ID:       o2b:1712bebe-b383-4335-ad81-c10f995c1ee0
:POST_DATE: [2021-11-20 Sat 21:43]
:POSTID:   378
:END:

ã‚‹ã³ãã¡ã•ã‚“ã®[[http://emacs.rubikitch.com/backup-each-save/][ã“ã¡ã‚‰]]ã®è¨˜äº‹ã‹ã‚‰ã§ã™ã€‚[[http://emacs.rubikitch.com/real-auto-save/][real-auto-save.el]]ã¯ãã“ã¾ã§ã¯ã„ã‚‰ãªã„ã‹ãªã€ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚å‰²ã¨ã—ã‚‡ã£ã¡ã‚…ã†C-x C-sã‚’æ‰“ã£ã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã®ã§ã€‚

#+begin_src emacs-lisp
  (leaf backup-each-save
    :package t
    :config
    ;; ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å…ˆ
    (setq backup-each-save-mirror-location "~/.emacs.d/backups")
    ;; ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã‘ã‚‹suffix
    (setq backup-each-save-time-format "%y%m%d_%H%M%S")
    ;; ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ä¸Šé™
    (setq backup-each-save-size-limit 5000000)
    ;; ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹
    (setq backup-each-save-filter-function 'identity)
    ;; æœ‰åŠ¹åŒ–ï¼
    (add-hook 'after-save-hook 'backup-each-save))
#+end_src

#+RESULTS:
: backup-each-save

** undo-tree
   - [[https://elpa.gnu.org/packages/undo-tree.html][GNU ELPA - undo-tree]]

   #+begin_src emacs-lisp
     (leaf undo-tree
       :ensure t
       :config
       (global-undo-tree-mode))
   #+end_src

** fly-check

- emacs-lispã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”¨ã®ãƒã‚§ãƒƒã‚¯(emacs-lisp-checkdoc)ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã€‚

#+begin_src emacs-lisp
  (leaf flycheck
    :doc "On-the-fly syntax checking"
    :emacs>= 24.3
    :ensure t
    :bind (("M-n" . flycheck-next-error)
           ("M-p" . flycheck-previous-error))
    :custom ((flycheck-emacs-lisp-initialize-packages . t)
             (flycheck-disabled-checkers . '(emacs-lisp-checkdoc)))
    :hook (emacs-lisp-mode-hook lisp-interaction-mode-hook)
    :config
    (leaf flycheck-package
      :doc "A Flycheck checker for elisp package authors"
      :ensure t
      :config
      (flycheck-package-setup))

    (leaf flycheck-elsa
      :doc "Flycheck for Elsa."
      :emacs>= 25
      :ensure t
      :config
      (flycheck-elsa-setup))
    )
#+end_src

** pandoc-mode

- C-c / ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º
- http://joostkremers.github.io/pandoc-mode/

#+begin_src emacs-lisp
  (leaf pandoc-mode
    :doc "Minor mode for interacting with Pandoc"
    :req "hydra-0.10.0" "dash-2.10.0"
    :tag "pandoc" "text"
    :added "2020-11-24"
    :url "http://joostkremers.github.io/pandoc-mode/"
    :ensure t
    :after hydra)
#+end_src

** magit
- Emacsã®Git
#+begin_src emacs-lisp
  (leaf magit
    :doc "A Git porcelain inside Emacs."
    :req "emacs-25.1" "async-20200113" "dash-20200524" "git-commit-20200516" "transient-20200601" "with-editor-20200522"
    :tag "vc" "tools" "git" "emacs>=25.1"
    :added "2020-11-30"
    :emacs>= 25.1
    :ensure t
    :after git-commit with-editor
    :bind (("C-x g" . magit-status))
    )
#+end_src

#+RESULTS:
: magit

- [[http://tanehp.ec-net.jp/heppoko-lab/prog/resource/magit/magit_memo.html#%E5%A4%89%E6%9B%B4%E3%82%92%E6%88%BB%E3%81%99][Magit ã®è¦šãˆæ›¸ã]]
  - Discard

** migemo
*** Linux
- .emacs.d/migemo-dictã‚’ç”¨æ„
  - cmigemoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦
  - /usr/share/cmigemo/utfg-8/migemo-dictã‚’ã‚³ãƒ”ãƒ¼
- [[https://github.com/emacs-jp/migemo][emacs-jp/migemo: emacs migemo client]]
#+begin_src emacs-lisp
  (leaf migemo
    :when (eq system-type 'gnu/linux)
    :ensure t
    :require t
    :config
    ;; cmigemo(default)
    (setq migemo-command "cmigemo")
    (setq migemo-options '("-q" "--emacs"))

    ;; ruby migemo
    ;; (setq migemo-command "ruby")
    ;; (setq migemo-options '("-S" "migemo" "-t" "emacs" "-i" "\a"))

    ;; Set your installed path
    (setq migemo-dictionary "/usr/share/cmigemo/utf-8/migemo-dict")

    (setq migemo-user-dictionary nil)
    (setq migemo-regex-dictionary nil)
    (setq migemo-coding-system 'utf-8-unix)
    (migemo-init)
    )
#+end_src

#+RESULTS:
: migemo

*** Windows
- [[https://hangstuck.com/emacs-cmigemo-windows/][Windowsã§ã® Emacsã§migemo ã‚’æœ‰åŠ¹ã«ã™ã‚‹è¨­å®šæ–¹æ³• | ãƒãƒ³ã‚°ã‚¹ã‚¿ãƒƒã‚¯]]
- migemoã®è¾æ›¸ã¯çµ¶å¯¾ãƒ‘ã‚¹ã§å‚ç…§ã™ã‚‹
- ãã®ä»–ã®å¤‰æ•°ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å‹•ä½œã™ã‚‹
- ã¨ã‚Šã‚ãˆãšWindowsã§å‹•ãã‚ˆã†ã«ã—ãŸ

#+begin_src emacs-lisp
  (leaf migemo
    :when (and
           (eq system-type 'windows-nt)
           (file-exists-p "C:/Users/yc/lib/cmigemo-default-win64/dict/utf-8/migemo-dict"))
    :ensure t
    :setq
    (migemo-dictionary . "C:/Users/yc/lib/cmigemo-default-win64/dict/utf-8/migemo-dict")
    :config
    (load-library "migemo")
    (migemo-init))
#+end_src

  #+RESULTS:
  : migemo

** yasnippet
- [[https://github.com/joaotavora/yasnippet][joaotavora/yasnippet: A template system for Emacs]]
- ã‚µãƒ³ãƒ—ãƒ«ã¯æ¬¡ã®å ´æ‰€ã«ã‚ã‚‹ã®ã§å¿…è¦ãªã‚‚ã®ã¯ ~/.emacs.d/snippets ã«ã‚³ãƒ”ãƒ¼
  - ~/.emacs.d/elpa/yasnippet-snippets-20210910.1959/snippets/

- :setq ã‚’ä½¿ã†å ´åˆã®æ³¨æ„
  - :init ã ã¨ :init -> :setq ã®é †ç•ªã§NG
  - :config ãªã‚‰ :setq -> :init
- :require ã¨ã®é–¢ä¿‚
  -  :init -> :require -> :setq -> :config

- :require ãªã—
  - :init -> NG

- ãƒã‚¯ãƒ­å±•é–‹
    #+begin_src
  (prog1 'yasnippet-snippets
    (leaf-handler-leaf-path yasnippet-snippets)
    (leaf-handler-leaf-protect yasnippet-snippets
      (leaf-handler-package yasnippet-snippets yasnippet-snippets nil)
      (yas-global-mode 1) ; <- 2
      (setq yasnippet-snippets-dir "~/.emacs.d/snippets"))) ; <- 1
    #+end_src

  - :config -> NG

    #+begin_src
  (prog1 'yasnippet-snippets
    (leaf-handler-leaf-path yasnippet-snippets)
    (leaf-handler-leaf-protect yasnippet-snippets
      (leaf-handler-package yasnippet-snippets yasnippet-snippets nil)
      (setq yasnippet-snippets-dir "~/.emacs.d/snippets") ; <- 1
      (yas-global-mode 1))) ; <- 2
    #+end_src

- :require ã‚ã‚Š

  - :init -> NG

    #+begin_src
(prog1 'yasnippet-snippets
  (leaf-handler-leaf-path yasnippet-snippets)
  (leaf-handler-leaf-protect yasnippet-snippets
    (leaf-handler-package yasnippet-snippets yasnippet-snippets nil)
    (yas-global-mode 1)
    (require 'yasnippet-snippets)
    (setq yasnippet-snippets-dir "~/.emacs.d/snippets")))
    #+end_src

  - :config -> OK

[[https://qiita.com/conao3/items/dc88bdadb0523ef95878][ã€Œ:prefaceã¯æ¡ä»¶åˆ†å²ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚ˆã‚Šå…ˆã«å±•é–‹ã—ãŸã„ã€ãªã©ã®é †åºã«é–¢ã™ã‚‹å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ leaf ã¯æ•´å½¢ã•ã‚ŒãŸplistã‚’ã€Œå–„ã„é †ç•ªã€ã«ä¸¦ã³æ›¿ãˆã¾ã™ã€‚  ãã®ã€Œå–„ã„é †ç•ªã€ã¯å†…éƒ¨å¤‰æ•°ã®leaf-keywordsã®ä¸¦ã³é †ã§ã€ *scratch* ã§ (pl (leaf-available-keywords)) ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã§å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚]]

    #+begin_src
(prog1 'yasnippet-snippets
  (leaf-handler-leaf-path yasnippet-snippets)
  (leaf-handler-leaf-protect yasnippet-snippets
    (leaf-handler-package yasnippet-snippets yasnippet-snippets nil)
    (require 'yasnippet-snippets)
    (setq yasnippet-snippets-dir "~/.emacs.d/snippets")
    (yas-global-mode 1)))
    #+end_src

#+begin_src emacs-lisp
  (leaf yasnippet-snippets
    :package t
    :require t
    :setq
    (yasnippet-snippets-dir . "~/.emacs.d/snippets")
    :config
    (custom-set-variables
     '(warning-suppress-types (quote ((yasnippet backquote-change)))))
    (yas-global-mode 1))
#+end_src

#+RESULTS:
: yasnippet-snippets

** multiple-cursors
+ [[https://dev.classmethod.jp/articles/emacs-multiple-cursors/][è¤‡æ•°ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ“ä½œã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ multiple-cursors.el ã®ã”ç´¹ä»‹ | DevelopersIO]]

+ ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã‚ã‚ã›ã‚‹
+ region-bindings-modeã¨ã¨ã‚‚ã«ä½¿ã†ã¨ã‚ˆã„

#+begin_src emacs-lisp
    (leaf multiple-cursors
      :package t
      :config
      ;; use region-bindings-mode instead
      ;; (global-set-key (kbd "C-S-c C-S-c") 'mc/edit-lines)
      ;; (global-set-key (kbd "C->")         'mc/mark-next-like-this)
      ;; (global-set-key (kbd "C-<")         'mc/mark-previous-like-this)
      ;; (global-set-key (kbd "C-c C-<")     'mc/mark-all-like-this))
      )
#+end_src

#+RESULTS:
: multiple-cursors

** region-bindings-mode
+ [[https://tam5917.hatenablog.com/entry/20130129/1359465171][region-bindings-modeã®ç´¹ä»‹ - å‚™å¿˜éŒ²]]
+ [[https://github.com/magnars/expand-region.el][magnars/expand-region.el: Emacs extension to increase selected region by semantic units.]]
+ [[https://github.com/fgallina/region-bindings-mode][GitHub - fgallina/region-bindings-mode: A minor mode that enables custom bindings when mark is active.]]

#+begin_src emacs-lisp
  (leaf region-bindings-mode
    :package t
    :require t
    :config
    (region-bindings-mode-enable)
    (define-key region-bindings-mode-map "e" 'mc/edit-lines)
    (define-key region-bindings-mode-map "a" 'mc/mark-all-like-this)
    (define-key region-bindings-mode-map "p" 'mc/mark-previous-like-this)
    (define-key region-bindings-mode-map "n" 'mc/mark-next-like-this)
    (define-key region-bindings-mode-map "m" 'mc/mark-more-like-this-extended)
    )
#+end_src

#+RESULTS:
: region-bindings-mode

** yaml-mode

#+begin_src emacs-lisp
  (leaf yaml-mode :package t)
#+end_src

#+RESULTS:
: yaml-mode

+ å‚è€ƒ
  * [[https://github.com/DarthFennec/highlight-indent-guides][DarthFennec/highlight-indent-guides: Emacs minor mode to highlight indentation]]

** rainbow-delimiters
*** èª¬æ˜

#+begin_src emacs-lisp
  (leaf rainbow-delimiters
    :package t
    :hook
    (prog-mode-hook . rainbow-delimiters-mode))
#+end_src

#+RESULTS:
: rainbow-delimiters

*** å‚è€ƒ
+ [[https://qiita.com/Ladicle/items/feb5f9dce9adf89652cf#%E6%8B%AC%E5%BC%A7%E3%81%8C%E5%A4%9A%E3%81%84%E3%81%A8%E8%99%B9%E3%81%8C%E3%81%BF%E3%81%88%E3%82%8B----rainbow-delimiters][Emacsãƒ¢ãƒ€ãƒ³åŒ–è¨ˆç”» -ã‹ã‚Emacsç·¨- - Qiita]]

** highlight-indent-guides
*** èª¬æ˜
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã¨ãã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

*** è¨­å®š
#+begin_src emacs-lisp
  (leaf highlight-indent-guides
    :package t
    :require t
    :hook
    ((prog-mode-hook yaml-mode-hook) . highlight-indent-guides-mode)
    :custom
    (highlight-indent-guides-auto-enabled . t)
    (highlight-indent-guides-responsive . t)
    (highlight-indent-guides-method . 'character)) ; column
#+end_src

#+RESULTS:
: highlight-indent-guides

*** å‚è€ƒ
+ [[https://qiita.com/Ladicle/items/feb5f9dce9adf89652cf#yaml%E3%81%AE%E9%9A%8E%E5%B1%A4%E6%A7%8B%E9%80%A0%E3%81%AB%E8%B2%A0%E3%81%91%E3%81%AA%E3%81%84----highlight-indent-guides][Emacsãƒ¢ãƒ€ãƒ³åŒ–è¨ˆç”» -ã‹ã‚Emacsç·¨- - Qiita]]

** beacon
*** è¨­å®š

#+begin_src emacs-lisp
  (leaf beacon
    :package t
    :custom
    (beacon-mode . t))
#+end_src

#+RESULTS:
: beacon

*** å‚è€ƒ
+ [[https://qiita.com/Ladicle/items/feb5f9dce9adf89652cf#%E3%82%82%E3%81%86%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%E8%A6%8B%E5%A4%B1%E3%82%8F%E3%81%AA%E3%81%84----beacon][Emacsãƒ¢ãƒ€ãƒ³åŒ–è¨ˆç”» -ã‹ã‚Emacsç·¨- - Qiita]]

** git-gutter

#+begin_src emacs-lisp
  (leaf git-gutter
    :package t
    ;; :custom
    ;; (git-gutter:modified-sign . "~")
    ;; (git-gutter:added-sign    . "+")
    ;; (git-gutter:deleted-sign  . "-")
    ;; :custom-face
    ;; (git-gutter:modified . ((t (:background "#f1fa8c"))))
    ;; (git-gutter:added    . ((t (:background "#50fa7b"))))
    ;; (git-gutter:deleted  . ((t (:background "#ff79c6"))))
    :custom
    (global-git-gutter-mode . t))
#+end_src

#+RESULTS:
: git-gutter

** DONE shell-pop - ã„ã¤ã§ã‚‚ã©ã“ã§ã‚‚shellã‚’å‡ºã™                  :published:
CLOSED: [2021-11-09 Tue 20:23]
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-09 20:16:56]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp
:ID:       o2b:dc0f7103-fb58-4bae-96e1-54699516f5b0
:POST_DATE: [2021-11-09 Tue 20:17]
:POSTID:   254
:END:
*** èª¬æ˜
Emacsã§ä½œæ¥­ä¸­ã«ã€shellã§ä½œæ¥­ã‚’ã—ãŸããªã‚‹ã“ã¨ã¯ã‚ˆãã‚ã‚Šã¾ã™ã€‚ãã®ã‚ˆã†ãªéš›ã«ä¾¿åˆ©ãªè¨­å®šã§ã™ã€‚

*** è¨­å®š
å…¬å¼[fn:1]ã§ã¯C-tã«å‰²ã‚Šå½“ã¦ã¦ã„ã¾ã™ãŒã€ç§ã¯æ¨™æº–ã®C-tã‚’ã‚ã‚Šã¨å¤šç”¨ã—ã¾ã™ã€‚ãªã®ã§ã€C-c sã«ã‚¢ã‚µã‚¤ãƒ³ã—ã¾ã—ãŸã€‚
# ç§ã¯C-zã«ã—ã¦ã„ã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Emacsã‚’ç«‹ã¡ä¸Šã’ãŸã¨ãã€ã¡ã‚‡ã£ã¨shellã§ä½œæ¥­ã‚’ã—ãŸã„ã¨æ€ã£ãŸã‚‰C-zã§ã‚µã‚¹ãƒšãƒ³ãƒ‰ã—ã¾ã™ã€‚ãã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ã€shellä½¿ã„ãŸã„ãªã€ã¨æ€ã†ã¨å‹æ‰‹ã«æ‰‹ãŒåå¿œã—ã¾ã™ã€‚shellã‚’ä½¿ã„çµ‚ã‚ã£ãŸã‚‰ã€ã‚‚ã†ä¸€åº¦C-zã§é–‰ã˜ã¾ã™ã€‚

#+begin_src emacs-lisp
  (leaf shell-pop
    :package t
    :require t
    :custom
    ((shell-pop-universal-key . "C-c s")
     (shell-pop-shell-type . (quote ("eshell" "*eshell*" (lambda nil (eshell shell-pop-term-shell)))))
     (shell-pop-window-position . "bottom")
     (setq shell-pop-full-span . t)))
#+end_src

#+RESULTS:
: shell-pop

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯ansi-termã«ã—ã¾ã—ãŸ[fn:2]ï¼ˆ6è¡Œç›®ï¼‰ã€‚
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯eshellã«ã—ã¾ã—ãŸ[fn:2]ï¼ˆ6è¡Œç›®ï¼‰ã€‚
ã¾ãŸã€å¸¸ã«ç”»é¢ã®ä¸‹éƒ¨ã«å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ï¼ˆ7è¡Œç›®ï¼‰ã€‚
ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã®å¹…ã„ã£ã±ã„ã«è¡¨ç¤ºã—ã¾ã™ï¼ˆ87è¡Œç›®ï¼‰ã€‚

[fn:1] [[https://github.com/kyagi/shell-pop-el][kyagi/shell-pop-el: shell-pop.el helps you to use shell easily on Emacs. Only one key action to work.]]

[fn:2] [[https://blog.inouetakuya.info/entry/20110627/1309175529][Emacs ã®ã‚·ã‚§ãƒ«ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒ - shellã€ansi-termã€multi-term - å½¼å¥³ã‹ã‚‰ã¯ã€ãŠã„ã¡ã‚ƒã‚“ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™]]

** DONE visual-fill-column - é•·ã„è¡Œã‚’ä»»æ„ã®æ¡ã§æŠ˜ã‚Šè¿”ã™          :published:
CLOSED: [2021-11-10 Wed 11:12]
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-08 22:19:48]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs
:ID:       o2b:88634903-8b8b-44b8-9b7f-a50fdc58ed5d
:POST_DATE: [2021-11-08 Mon 22:21]
:POSTID:   218
:END:
*** é•·ã„è¡Œã‚’æŠ˜ã‚Šè¿”ã™ï¼ŸæŠ˜ã‚Šè¿”ã•ãªã„ï¼Ÿ
Emacsã§ã¯é•·ã„è¡Œã‚’æŠ˜è¿”ã—ã¦è¡¨ç¤ºã—ã¦ãã‚Œã¾ã™ã€‚

[[https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line.png]]

è¡ŒãŒç¹‹ãŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã™çŸ¢å°ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒã€ç”»é¢ã®å·¦å³ã«ã„ã£ã±ã„å‡ºã¦ã„ã¾ã™ã­ã€‚

ã“ã®æŠ˜è¿”ã—ã‚’ã—ãªãã™ã‚‹ã«ã¯ã€å¤‰æ•°truncate-linesã‚’tã«è¨­å®šã—ã¾ã™ã€‚

#+begin_example
M-x set-variable
truncate-lines
t
#+end_example
ãã†ã™ã‚‹ã¨ã€

https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line-truncate.png

é•·ã„æ–‡ã®å‰ã®ä¸€éƒ¨åˆ†ã ã‘ã€è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‚«ãƒ¼ã‚½ãƒ«ã‚’å³ã«ç§»å‹•ã™ã‚Œã°ã€å…¨ä½“ã‚’èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹ã¨ãã«ã¯ä¾¿åˆ©ã§ã™ã€‚

*** æ”¹è¡Œã§é•·ã„è¡Œã‚’åˆ†å‰²ã™ã‚‹
ã“ã®é•·ã„è¡Œã§M-qã‚’æŠ¼ã—ã¾ã™ï¼ˆfill-paragraphï¼‰ã€‚ã™ã‚‹ã¨ã€

https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line-fill-paragraph.png

é•·ã„ä¸€ã¤ã®è¡Œã«ã€æ”¹è¡ŒãŒæŒ¿å…¥ã•ã‚Œã¦è¤‡æ•°ã®è¡Œã«åˆ†å‰²ã•ã‚Œã¾ã—ãŸã€‚ã“ã®ã¨ãã€ä¸€ã¤ã®è¡Œã®é•·ã•ã¯72æ–‡å­—ã‚’è¶…ãˆãªã„é•·ã•ã«ãªã‚Šã¾ã™ã€‚Emacsã®ãƒ˜ãƒ«ãƒ—ã‚„ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’è¦‹ã‚‹ã¨ã“ã®ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã­ã€‚ç´™ã«å°åˆ·ã™ã‚‹ã¨ãã‚‚ã€ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ãªã‚‰ã¯ã¿å‡ºã¦èª­ã‚ãªããªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚æ˜”ã¯ãƒ¡ãƒ¼ãƒ«ã‚‚ã“ã‚“ãªæ„Ÿã˜ã§æ›¸ãã®ãŒæ™®é€šã§ã—ãŸã€‚

*** ä¸€è¡Œã‚’åˆ†å‰²ã—ãªã„ã§æŠ˜è¿”ã—ä½ç½®ã‚’è‡ªç”±ã«è¨­å®šã—ãŸã„
ã•ã¦ã€æ™‚ã¯æµã‚Œã¦ã€ã„ã¾ã‚„ãƒ¡ãƒ¼ãƒ«ã‚‚HTMLã§æ›¸ãæ™‚ä»£ã§ã™ï¼ˆå¥½ã‚€ã¨å¥½ã¾ã–ã‚‹ã«ã‹ã‹ã‚ã‚‰ãšï¼‰ã€‚å°ã•ãªç”»é¢ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ãƒ¡ãƒ¼ãƒ«ã‚’èª­ã‚€ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã‚“ãªã¨ãã€72æ–‡å­—ã”ã¨ã«æ”¹è¡ŒãŒã¯ã„ã‚‹ã¨ã€éå¸¸ã«èª­ã¿ã¥ã‚‰ããªã‚Šã¾ã™ã€‚ä¸€è¡Œã¯ä¸€è¡Œã®ã¾ã¾ã§ã€è¡¨ç¤ºã‚’ã™ã‚‹ã¨ãã«ã¯ç”»é¢ã®ã‚µã‚¤ã‚ºã«å¿œã˜ãŸä½ç½®ã§æ”¹è¡Œã—ã¦ã»ã—ã„ã§ã™ã‚ˆã­ã€‚

ãŸã ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã ã¨ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã®ç«¯ã§æŠ˜ã‚Šè¿”ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å°‘ã—èª­ã¿ã«ãã„ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿä¸€è¡Œã¯ä¸€è¡Œã®ã¾ã¾ã€è‡ªå‹•ã§æ”¹è¡Œã—ã¦ã»ã—ã„ã€ãã®ã¨ãã€æ”¹è¡Œã™ã‚‹ä½ç½®ã‚’æŒ‡å®šã—ãŸã„ã€‚ã“ã‚“ãªã¨ãã«åˆ©ç”¨ã§ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒvisual-fill-columãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚

https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line-visual-fill-column.png

ä¸€è¡Œã¯ä¸€è¡Œã®ã¾ã¾ã€72æ–‡å­—ã§æŠ˜è¿”ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ä¸€è¡Œã®é•·ã•ãŒçŸ­ããªã‚Šã€å¤šå°‘ã¯èª­ã¿ã‚„ã™ããªã£ã¦ã¾ã™ã­ã€‚

*** visula-fill-columnã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯æ¬¡ã®é€šã‚Šè¨­å®šã—ã¾ã™ã€‚

#+begin_src emacs-lisp
  (leaf visual-fill-column
    :doc "fill-column for visual-line-mode"
    :req "emacs-25.1"
    :tag "emacs>=25.1"
    :url "https://github.com/joostkremers/visual-fill-column"
    :added "2021-11-08"
    :emacs>= 25.1
    :ensure t
    :bind(("C-c q" . visual-fill-column-mode)
          (:visual-fill-column-mode-map
           ("C-a" . beginning-of-visual-line)
           ("C-e" . end-of-visual-line)
           ("C-k" . kill-visual-line))))
#+end_src

#+RESULTS:
: visual-fill-column

C-c qã«visual-fill-column-modeã«ã™ã‚‹ã‚­ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã¾ã—ãŸã€‚M-qã§fill-paragraphã™ã‚‹ã‚¢ãƒŠãƒ­ã‚¸ãƒ¼ã§ã™ã€‚

ã¾ãŸã€ä¸€è¡Œã‚’åŸºæº–ã«å‹•ä½œã™ã‚‹æ¨™æº–ã®ã‚­ãƒ¼ã‚’ã€ç”»é¢ã®ä¸€è¡Œã‚’åŸºæº–ã«å‹•ä½œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«ã€æ¬¡ã®é€šã‚Šç½®ãæ›ãˆã¦ã„ã¾ã™[fn:1]ã€‚

| ã‚­ãƒ¼ | èª¬æ˜                          |
|------+-------------------------------|
| C-a  | *ç”»é¢ä¸Šã®* è¡Œã®ä¸€ç•ªå…ˆé ­ã«ç§»å‹• |
| C-e  | *ç”»é¢ä¸Šã®* è¡Œã®ä¸€ç•ªæœ«å°¾ã«ç§»å‹• |
| C-k  | *ç”»é¢ä¸Šã®* è¡Œã‚’ä¸€è¡Œå‰Šé™¤       |

ã“ã®è¨­å®šã«ã‚ˆã‚Šã€æŠ˜ã‚Šè¿”ã™æ¡ã‚’è‡ªç”±ã«æŒ‡å®šã§ãã‚‹ä¸Šã«ã€ç”»é¢ä¸Šã®ä¸€è¡Œã‚’å˜ä½ã¨ã—ã¦ç·¨é›†ã§ãã¾ã™ã€‚

æŠ˜ã‚Šè¿”ã™ä½ç½®ã¯æŒ‡å®šã§ãã¾ã™ã€‚æŠ˜ã‚Šè¿”ã—ãŸã„æ¡ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã€ C-u C-x f ã‚’æŠ¼ã™ã¨ã€ãã®ä½ç½®ã§æ”¹è¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã‚ã‚‹ã„ã¯ C-u 50 C-x f ã®ã‚ˆã†ã«ã€æ¡æ•°ã‚’å¼•æ•°ã«ä¸ãˆã¦ã‚‚ã‚ˆã„ã§ã™ã€‚ãªãŠã€è¨­å®šã—ãŸã ã‘ã§ã¯è¡¨ç¤ºã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ä½•ã‹æ–‡å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¤‰ã‚ã‚Šã¾ã™ã€‚

https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line-visual-fill-column-50.png

*** å˜èªã®é€”ä¸­ã§æŠ˜ã‚Šè¿”ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ã«ã¯
ã•ã¦ã€æ—¥æœ¬èªã§å…¥åŠ›ã™ã‚‹ã®ã§ã‚ã‚Œã°ã“ã®ã¾ã¾ã§ã‚‚ã‚ˆã„ã®ã§ã™ãŒã€è‹±èªã®å ´åˆã€å˜èªã®é€”ä¸­ã§æŠ˜ã‚Šè¿”ã•ã‚Œã‚‹ã®ã¯å«Œã§ã™ã­ã€‚ãã‚“ãªã¨ãã¯ visual-line-mode ã‚’ä½¿ã„ã¾ã™ã€‚ã“ã®ãƒ¢ãƒ¼ãƒ‰ã¯æ¨™æº–è£…å‚™ã§ã™ã€‚M-x visual-line-modeã§è¨­å®šã§ãã¾ã™ã€‚

https://ploversky.net/wp-content/uploads/2021/11/emacs-long-line-visual-line-mode.png

å˜èªãŒé€”ä¸­ã§æ”¹è¡Œã•ã‚Œãªã„ã®ã§ã€è¦‹ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚ã“ã®è¡Œã¯å…¨ã¦ç¹‹ãŒã£ã¦ã„ã¾ã™ãŒã€çŸ¢å°ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚‚ã§ãªããªã‚Šã¾ã—ãŸã€‚ãŸã ã—ã€æ—¥æœ¬èªã®æ–‡æ›¸ã§ã“ã®è¨­å®šã‚’ã—ã¦ã—ã¾ã†ã¨ã€é€†ã«è¦‹ã¥ã‚‰ã„ã§ã™ï¼ˆæ—¥æœ¬èªã«ã¯å˜èªã®åŒºåˆ‡ã‚Šï¼ˆç©ºç™½ï¼‰ãŒãªã„ã®ã§ã€é€†ã«ã©ã“ã§æ”¹è¡Œã™ã‚‹ã‹åˆ¤æ–­ã—ã«ãã„ï¼‰ã€‚

#+begin_comment
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ante nisl, condimentum vitae blandit porttitor, ultricies in enim. Integer sit amet mi tincidunt, blandit metus id, finibus quam. Donec egestas tortor at metus condimentum, at varius magna venenatis. Nullam auctor ipsum quis massa semper, non eleifend quam accumsan. Etiam sed dui nisl. Nulla ac tempus nulla. Nulla facilisi. Cras ligula elit, rutrum in augue volutpat, pharetra tempus metus. Aliquam nibh est, scelerisque sit amet nisi non, aliquam volutpat nibh. Pellentesque consequat dui eros, sed fermentum augue tincidunt eu. Quisque eget tristique massa, eu gravida nunc.
#+end_comment

*** ã¾ã¨ã‚
æ—¥æœ¬èªã®å ´åˆã€

1. truncate-linesã¯nilï¼ˆæ¨™æº–ã®ã¾ã¾ï¼‰
2. visual-fill-columnãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦æ¡æ•°ã‚’è¨­å®š

ã™ã‚‹ã¨ã€è‡ªç”±ã«å¥½ããªä½ç½®ã§æŠ˜è¿”ã—è¡¨ç¤ºã•ã›ã¦ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

è‹±èªã®å ´åˆã€è¿½åŠ ã§

3. visual-line-modeã‚’åˆ©ç”¨ï¼ˆæ¨™æº–ã§åˆ©ç”¨å¯ï¼‰

ã¨ãªã‚Šã¾ã™ã€‚

*** å‚è€ƒ
+ [[https://github.com/joostkremers/visual-fill-column][joostkremers/visual-fill-column: Emacs mode for wrapping visual-line-mode buffers at fill-column.]]
  * visual-fill-columnãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚µã‚¤ãƒˆ
+ [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Visual-Line-Mode.html][https://www.gnu.org/software/emacs/manual/html_node/emacs/Visual-Line-Mode.html]]
  * visual-line-modeã®èª¬æ˜

[fn:1] orgãƒ¢ãƒ¼ãƒ‰ã§ã¯C-kã«org-kill-lineãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§å¼Šå®³ãŒãŠãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æœªç¢ºèªã§ã™ã€‚

*** COMMENT ã‚³ãƒ¡ãƒ³ãƒˆ
+ mu4eã§ãƒ¡ãƒ¼ãƒ«ã‚’æ›¸ãã¨ãã«åˆ©ç”¨ã™ã‚‹ã€‚
+ [[https://www.gnu.org/software/emacs/manual/html_node/elisp/Adaptive-Fill.html][https://www.gnu.org/software/emacs/manual/html_node/elisp/Adaptive-Fill.html]]
  * Adaptive Fill Modeã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚‚ï¼ˆèª¿æŸ»ä¸­ï¼‰
+ [[https://github.com/joostkremers/visual-fill-column#centering-the-text][joostkremers/visual-fill-column: Emacs mode for wrapping visual-line-mode buffers at fill-column.]]
  * ã‚»ãƒ³ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚‚

* UIãƒ»è¦‹ãŸç›®
** modus-themes
- [[https://protesilaos.com/modus-themes/][Modus Themes (Modus Operandi and Modus Vivendi) | Protesilaos Stavrou]]

#+begin_src emacs-lisp
  (leaf modus-themes
    :ensure t                        ; omit this to use the built-in themes
    :init
    ;; Add all your customizations prior to loading the themes
    (setq modus-themes-italic-constructs t
          modus-themes-bold-constructs nil
          modus-themes-region '(bg-only no-extend))

    ;; Load the theme files before enabling a theme (else you get an error).
    (modus-themes-load-themes)
    :config
    ;; Load the theme of your choice:
    (modus-themes-load-operandi) ;; OR (modus-themes-load-vivendi)
    :bind ("<f5>" . modus-themes-toggle))
#+end_src

#+RESULTS:
: modus-themes

** whitespace - ç©ºç™½æ–‡å­—ã®å¯è¦–åŒ–
- [[https://yanqirenshi.hatenablog.com/entry/2016/07/03/Emacs%3A_whitespace_%E3%81%A7%E4%BD%99%E5%88%86%E3%81%AA%E7%A9%BA%E7%99%BD/%E3%82%BF%E3%83%96%E3%81%AB%E8%89%B2%E3%81%A5%E3%81%91][Emacs: whitespace ã§ä½™åˆ†ãªç©ºç™½/ã‚¿ãƒ–ã«è‰²ã¥ã‘ - ã»ã‚“ã¨ã®ã“ã¨çŸ¥ã‚ŠãŸã„ã ã‘ãªã®ã«ã€‚]]
  - M-x list-faces-display ã§è¨­å®šã™ã‚‹è‰²ã®ç¨®é¡ã¨è‰²ã‚’ç¢ºèªã§ãã¾ã™ã€‚
  - è¨­å®šã™ã‚‹è‰²ã¯ M-x list-colors-display ã§ç¢ºèªã™ã‚‹æ„Ÿã˜ã€‚
- è‰²ã¯ãƒ†ãƒ¼ãƒã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã«ã—ã¦ãŠãã€‚

ã€€ã€€ã€€ã‚ã‚å…¨è§’ã€€ã€€ã€€ã€€ã€€â†å…¨è§’ã€€ã‚ã„ã†ãˆãŠ
ã‚ã„ã†ãˆãŠã€€æ¼¢å­—

#+begin_src emacs-lisp
  (leaf whitespace
    :require 't
    :config
    (setq whitespace-style
          '(
            face ; faceã§å¯è¦–åŒ–
            trailing ; è¡Œæœ«
            tabs ; ã‚¿ãƒ–
            spaces ; ã‚¹ãƒšãƒ¼ã‚¹
            space-mark ; è¡¨ç¤ºã®ãƒãƒƒãƒ”ãƒ³ã‚°
            tab-mark
            ))
    (setq whitespace-display-mappings
          '(
            (space-mark ?\u3000 [?â–¡])
            (tab-mark ?\t [?\u00BB ?\t] [?\\ ?\t])
            ))
    (setq whitespace-trailing-regexp  "\\([ \u00A0]+\\)$")
    (setq whitespace-space-regexp "\\(\u3000+\\)")
    ;; (set-face-attribute 'whitespace-trailing nil
    ;;                     :foreground nil
    ;;                     :background "DarkOrange1"
    ;;                     :underline nil)
    ;; (set-face-attribute 'whitespace-tab nil
    ;;                     :foreground "DarkOrange1"
    ;;                     :background nil
    ;;                     :underline nil)
    ;; (set-face-attribute 'whitespace-space nil
    ;;                     :foreground "DarkOrange1"
    ;;                     :background nil
    ;;                     :underline nil)
    (global-whitespace-mode t))
#+end_src

#+RESULTS:
: whitespace

** all-the-icons
- [[https://github.com/domtronn/all-the-icons.el][GitHub - domtronn/all-the-icons.el: A utility package to collect various Icon Fonts and propertize them within Emacs.]]

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥å¾Œã€ M-x all-the-icons-install-fonts ã§OSã«ãƒ•ã‚©ãƒ³ãƒˆã‚’
  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

#+begin_src emacs-lisp
  (leaf all-the-icons :ensure t)
#+end_src

#+RESULTS:
: all-the-icons

** doom-modeline - ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º

  #+begin_src emacs-lisp
    (leaf doom-modeline
      :ensure t
      :custom
      ;; (doom-modeline-buffer-file-name-style . 'truncate-with-project)
      ;; (doom-modeline-icon . t)
      ;; (doom-modeline-major-mode-icon . nil)
      ;; (doom-modeline-minor-modes . nil)
      :init
      ;; (after-init . doom-modeline-mode)
      (doom-modeline-mode 1)
      :config
      ;; (line-number-mode 1)
      ;; (column-number-mode 0)
      ;;   (doom-modeline-def-modeline 'main
      ;; '(bar workspace-number window-number evil-state god-state ryo-modal xah-fly-keys matches buffer-info remote-host buffer-position parrot selection-info)
          ;; '(misc-info persp-name lsp github debug minor-modes input-method major-mode process vcs checker))
      )
  #+end_src

  #+RESULTS:
  : doom-modeline

* ãƒ¡ãƒ¼ãƒ«/Web
** smtpmail - ãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡
*** èª¬æ˜
+ æœ€åˆã®ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡æ™‚ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€~/.authinfo ã«è‡ªå‹•ã§è¿½åŠ 

;; sending mail -- replace USERNAME with your gmail username
;; also, make sure the gnutls command line utils are installed
;; package 'gnutls-bin' in Debian/Ubuntu

#+begin_src emacs-lisp
  (leaf smtpmail
    :require t
    :setq ((message-send-mail-function quote smtpmail-send-it)
           (starttls-use-gnutls . t)
           (smtpmail-starttls-credentials '(("smtp.gmail.com" 587 nil nil)))
           (smtpmail-auth-credentials '(("smtp.gmail.com" 587 "yc@aiit.ac.jp" nil)))
           (smtpmail-default-smtp-server . "smtp.gmail.com")
           (smtpmail-smtp-server . "smtp.gmail.com")
           (smtpmail-smtp-service . 587)))
#+end_src

#+RESULTS:
: smtpmail

** shr/eww - Simple HTML Reader
+ èª¬æ˜
  * Emacsã®Webãƒ–ãƒ©ã‚¦ã‚¶ã«é–¢ã™ã‚‹è¨­å®š
  * ewwã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨èª­ã¿ã«ãã„ãƒ—ãƒ­ãƒãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚©ãƒ³ãƒˆã«ãªã‚‹
  * mu4eã§ã¯ãƒ¡ãƒ¼ãƒ«ã‚’èª­ã‚€éš›ã«shrã‚’ä½¿ã†
+ æ–‡çŒ®
  * [[https://www.emacswiki.org/emacs/eww][[Home] eww]]
+ è¨­å®š
  * ewwã‚’æ¨™æº–ã«ã™ã‚‹ã«ã¯browse-url-browser-functionã‚’è¨­å®šã™ã‚‹
  * shr-use-fontsã‚’nilã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€å›ºå®šå¹…ãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ã†ã‚ˆã†ã«ãªã‚‹

#+begin_src emacs-lisp
  (leaf eww
    :custom
    (
     ;; (browse-url-browser-function . 'eww-browse-url)
     (shr-use-colors    . nil)
     (shr-use-fonts     . nil)
     (shr-image-animate . nil)
     (shr-width         . 72)
     (eww-search-prefix . "https://www.google.com/search?q=")
     )
    )
#+end_src

#+RESULTS:
: eww

** notmuch - é«˜é€ŸMaildiræ¤œç´¢ãƒ„ãƒ¼ãƒ«ç”¨ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ã‚¤ã‚¹
*** ãƒ¡ãƒ¢
+ [[https://notmuchmail.org/notmuch-emacs/#index1h1][notmuch-emacs]]

+ [[https://notmuchmail.org/notmuch-emacs/#index5h2][After Notmuch is loaded notmuch-init-file (typically ~/.emacs.d/notmuch-config.el) is checked out.]]

+ orgã®annotationã«å¯¾å¿œã—ã¦ã„ãªã„ã‹ã‚‚ãƒ»ãƒ»ãƒ»
+ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¤‰æ•°
  * '(notmuch-draft-folder "Gmail/drafts")
    - ãƒ‰ãƒ©ãƒ•ãƒˆã¯Gmailã®draftsã¸
    - notmuch-fcc-dirs . nil
  * '(notmuch-fcc-dirs nil)
    - FCC (file carbon copy) ã¯ãªã—ã§Gmailã«ä»»ã›ã‚‹
+ inboxã‹ã©ã†ã‹ã‚’ã‚¿ã‚°ã§åˆ¤æ–­ã—ã¦ã„ã‚‹ï¼Ÿ+inbox
  * imapã®ã‚¿ã‚°ã¨notmuchã®ã‚¿ã‚°ã¯é•ã†ï¼Ÿ
+ æ–°ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚’å—ä¿¡ã—ãŸã‚‰ã€notmuch newãŒå¿…è¦
+ Maildirã‚’ç§»å‹•ã™ã‚‹æ–¹æ³•ä¸æ˜
+ [[https://githubmemory.com/repo/minad/vertico/issues/119][Notmuch.el select tag error: "Tag must be in the form of +'this_tag' or '-that_tag'" - githubmemory]]
  * Verticoã§ã‚¿ã‚°ã‚’æ“ä½œã™ã‚‹å ´åˆã®ãƒã‚°ã‚’å›é¿

+ [[https://notmuchmail.org/howto/][Index and search emails written in CJK scripts]]
  + æ—¥æœ¬èªã®å ´åˆã€XAPIAN_CJK_NGRAM=1

+ imapã§newã«å…¥ã£ãŸãƒ¡ãƒ¼ãƒ«ã‚’curã«ç§»ã™ã¨ããƒ•ã‚¡ã‚¤ãƒ«åã«
  * [[http://cr.yp.to/proto/maildir.html][When you move a file from new to cur, you have to change its name from uniq to uniq:info.]]
  * P,R,S,T,D,Fã®ãƒ•ãƒ©ã‚°ã‚’ã¤ã‘ã‚‹
  * ãƒ¡ãƒ¼ãƒ©ã§é–‹ã„ãŸã¨ãã€Sã®ãƒ•ãƒ©ã‚°ãŒã¤ã„ã¦newã‹ã‚‰curã«ç§»ã‚‹
+ ãã‚Œã¨ã¯åˆ¥ã«ï¼Œinboxã¨unreadã®ãƒ•ãƒ©ã‚°ãŒã¤ãï¼ˆinboxã¯notmuchã®ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚¿ã‚°ï¼‰

  + ãŸã¶ã‚“notmuch newã®ã¨ã
+ notmuchã§Inboxã‚’è¦‹ã‚‹ã«ã¯ï¼Ÿ
  + search path:/Gmail\/inbox/ <-æ­£è¦è¡¨ç¾
+ notmuchã®archiveã¨ã¯
  * inbox tagã‚’å‰Šé™¤ã™ã‚‹ã“ã¨
  * ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹•ã¯è¡Œã‚ãªã„ï¼Ÿ
+ ãã‚‚ãã‚‚Gmailã®Inboxã¨ã¯ï¼Ÿ
  * [[https://www.gmailhelplinenumber.co.uk/gmail-help-desk-number-uk.html][Gmail inbox is that folder in which only the non-archived emails are kept. ]]
  * Gmail All Mailã®ä¸€éƒ¨ã§ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚Œã¦ã„ãªã„ã‚‚ã®
  * Gmailä¸Šã§archiveã«ã¯inboxã®ãƒ¡ãƒ¼ãƒ«ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹
  * Gmailã§inboxã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ã¦ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã®inbox/curã«ã®ã“ã‚Šç¶šã‘ã‚‹ã‚ˆã†ã 
    - mbsync ã§æ¶ˆãˆãã†ã ã‘ã©ãƒ»ãƒ»ãƒ»
      - mbsnc ã®è¨­å®šã½ã„ãªã‚
    - [[https://www.seanh.cc/2021/08/22/backup-fastmail-and-gmail-with-isync/][Expunge Slave        # Expunge deleted messages from the local copy.]]
    - [[https://www.seanh.cc/2021/08/22/backup-fastmail-and-gmail-with-isync/][The Pipelinedepth 1 slows isync down by preventing it from having multiple IMAP commands in flight at once. This is necessary to prevent isync from hitting Gmailâ€™s bandwidth quotas and triggering this error message:]]
    - å‰Šé™¤ã•ã‚ŒãŸ

+ mbsyncã‚’å®šæœŸçš„ã«å®Ÿè¡Œã™ã‚‹ã«ã¯
  - watch -n 180 mbsync -a
  - [[https://wiki.archlinux.org/title/isync#Calling_mbsync_automatically][With imapnotify]]
  - WSLã§ã¯ã©ã‚ŒãŒã„ã„ï¼Ÿ nohup ã§

+ ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã®æ“ä½œ

| ã‚­ãƒ¼ | èª¬æ˜               |
|------+--------------------|
| m    | æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸     |
| n    | æ¬¡ã®è¡Œ             |
| SPC  | ãƒ¡ãƒ¼ãƒ«ã‚’èª­ã¿é€²ã‚ã‚‹ |
| M-n  | æ¬¡ã®ã‚¹ãƒ¬ãƒƒãƒ‰       |

*** è¨­å®š:notmuch

+ [[https://githubmemory.com/repo/minad/vertico/issues/119][Notmuch.el select tag error: "Tag must be in the form of +'this_tag' or '-that_tag'" - githubmemory]]
  * verticoã§ã‚¿ã‚°ãŒå…¥åŠ›ã§ããªã„å•é¡Œã‚’å›é¿ã™ã‚‹
+ [[https://notmuchmail.org/emacstips/#index5h2][Add a key binding to add/remove/toggle a tag]]

#+begin_src emacs-lisp
  (leaf notmuch
    :package t
    :require t
    :hook
    (notmuch-message-mode-hook . visual-fill-column-mode)
    (notmuch-message-mode-hook . (lambda () (auto-fill-mode -1)))
    :custom
    ((notmuch-draft-folder . "Gmail/draft") ; ãƒ‰ãƒ©ãƒ•ãƒˆã‚’Gmailã®ãƒ•ã‚©ãƒ«ãƒ€ã«
     (notmuch-fcc-dirs . nil) ; é€ä¿¡æ¸ˆã¿ãƒ¡ãƒ¼ãƒ«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã›ãšGmailã«ä»»ã›ã‚‹
     (notmuch-search-oldest-first . nil) ; æ¤œç´¢çµæœã‚’æ–°ã—ã„é †ã§ã‚½ãƒ¼ãƒˆ
     (notmuch-saved-searches
      . '((:name "inbox"      :query "tag:inbox folder:/Gmail\\/inbox/ AND NOT tag:deleted"
                 :key "i")
          (:name "unread"     :query "tag:unread AND NOT tag:deleted"  :key "u")
          (:name "flagged"    :query "tag:flagged AND NOT tag:deleted" :key "f")
          (:name "sent"       :query "tag:sent AND NOT tag:deleted"    :key "s")
          (:name "drafts"     :query "tag:draft AND NOT tag:deleted"   :key "d")
          (:name "Gmal Inbox" :query "folder:/Gmail\\/inbox/"          :key "I")
          (:name "Gmal Sent"  :query "folder:/Gmail\\/sent/"           :key "S")
          (:name "all mail"   :query "NOT tag:deleted"                 :key "a")))
     )
    :bind (("C-c m" . notmuch-hello))
    :config
    (advice-add #'notmuch-read-tag-changes
                :filter-return (lambda (x) (mapcar #'string-trim x))) ; verticoå¯¾ç­–
    :config
    (define-key notmuch-search-mode-map "f"
      (lambda ()
        "toggle flaged tag for message"
        (interactive)
        (if (member "flagged" (notmuch-search-get-tags))
            (notmuch-search-tag (list "-flagged"))
          (notmuch-search-tag (list "+flagged")))))
    (define-key notmuch-show-mode-map "f"
      (lambda ()
        "toggle flaged tag for message"
        (interactive)
        (if (member "flagged" (notmuch-show-get-tags))
            (notmuch-show-tag (list "-flagged"))
          (notmuch-show-tag (list "+flagged")))))
    (define-key notmuch-tree-mode-map "f"
      (lambda ()
        "toggle flaged tag for message"
        (interactive)
        (if (member "flagged" (notmuch-tree-get-tags))
            (notmuch-tree-tag (list "-flagged"))
          (notmuch-tree-tag (list "+flagged"))))))
#+end_src

#+RESULTS:
: notmuch

*** ol-notmuch

+ orgã®ãƒªãƒ³ã‚¯ã‚’notmuchã«å¯¾å¿œã•ã›ã‚‹
  - storeã¯ã§ãã‚‹ã‘ã©ãƒ»ãƒ»ãƒ»ï¼Ÿ
+ [[https://notmuchmail.org/emacstips/][Note the package was renamed from org-notmuch to ol-notmuch in recent versions of org-mode.]]

#+begin_src emacs-lisp
  (leaf ol-notmuch
    :package t
    :after notmuch org)
#+end_src

#+RESULTS:
: ol-notmuch

*** consult-notmuch
notmuchã®consultã§æ¤œç´¢ï¼ˆçµæœãŒå¤šã„ã¨è½ã¡ã‚‹ã‚ˆã†ã ï¼‰

#+begin_src emacs-lisp
  (leaf consult-notmuch
    :el-get emacsmirror/consult-notmuch
    :after consult notmuch)
#+end_src

#+RESULTS:
: consult-notmuch

** gnus-alias - notmuchã§ã‚·ã‚°ãƒãƒãƒ£

+ [[https://www.emacswiki.org/emacs/gnus-alias.el][http://github.com/hexmode/gnus-alias/]]
+ [[https://notmuchmail.org/emacstips/][gnus-alias allows you to define multiple identities when using message-mode.]]

#+begin_src emacs-lisp
  (leaf gnus-alias
    :el-get hexmode/gnus-alias
    :config
    (setq gnus-alias-identity-alist
          '(("work"
             nil
             "ä¸­é‰¢æ¬£ç§€ <yc@aiit.ac.jp>"
             nil ;; No organization header
             nil ;; No extra headers
             nil ;; No extra body text
             "~/.signature" ;; My signature
             ))))
#+end_src

#+RESULTS:
: gnus-alias

* OSä¾å­˜ã®è¨­å®š
** Linuxã§mozcã‚’ä½¿ã£ãŸæ—¥æœ¬èªå…¥åŠ›ã®è¨­å®šï¼ˆ2021å¹´ç‰ˆï¼‰
:PROPERTIES:
:BLOG:     plover
:DATE:     [2021-11-23 22:10:47]
:OPTIONS:  toc:nil num:nil todo:nil pri:nil tags:nil ^:nil
:CATEGORY: Tech
:POST_TAGS: Emacs, Lisp, Mozc, IME
:ID:       o2b:16b90138-c679-4ad8-b1f2-fab55daf0058
:POST_DATE: [2021-11-23 Tue 22:11]
:POSTID:   463
:END:

*** èª¬æ˜
æ—¥æœ¬èªå…¥åŠ›å‘¨ã‚Šã®è¨­å®šã‚’è¦‹ç›´ã—ã¦ã¿ã¾ã—ãŸã€‚

- å‚è€ƒ
  - [[https://w.atwiki.jp/ntemacs/pages/48.html][emacs-mozc ã‚’å‹•ã‹ã™ãŸã‚ã®è¨­å®šï¼ˆEmacs è¨­å®šç·¨ï¼‰ - NTEmacs @ ã‚¦ã‚£ã‚­ - atwikiï¼ˆã‚¢ãƒƒãƒˆã‚¦ã‚£ã‚­ï¼‰]]

*** å…¨ä½“ã®è¨­å®š
Mozcã«é–¢é€£ã™ã‚‹è¨­å®šã®å…¨ä½“ã§ã™ã€‚å€‹åˆ¥ã®èª¬æ˜ã¯[[*Mozcã‚µãƒ¼ãƒã¨é€šä¿¡ã™ã‚‹ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰][ã“ã¡ã‚‰]]ã‹ã‚‰ã€‚

#+begin_src emacs-lisp :noweb yes
  (leaf mozc
    :if (eq system-type 'gnu/linux)
    :package t
    :config
    <<mozc-helper>>
    <<mozc-im>>
    <<mozc-im-state-isearch>>
    <<mozc-cursor-color>>
    <<mozc-posframe>>)
#+end_src

#+RESULTS:
: mozc

*** Mozcã‚µãƒ¼ãƒã¨é€šä¿¡ã™ã‚‹ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰
Mozcã¨ã®ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚
WSLç’°å¢ƒã§ã¯ã€mozc_emacs_helper.exeã«ç½®ãæ›ãˆã‚‹ã¨ã€Windowså´ã®Google IMEãŒä½¿ãˆã‚‹ã¯ãšã§ã™ã€‚

#+begin_comment
- [[https://qiita.com/ignorant/items/1c4f729f9147fb878f10][WSL ã® Emacs ã§æ—¥æœ¬èªå…¥åŠ› - Qiita]]
  - Windowså´ã®Google IMEã‚’åˆ©ç”¨ã™ã‚‹
  - aptã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨æ€ã‚ã‚Œã‚‹mozc_emacs_helperï¼ˆãƒã‚¤ãƒŠãƒªï¼‰ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚
    - æ—¢ã«è¨­å®šã•ã‚Œã¦ã„ãŸ
      [[https://github.com/smzht/mozc_emacs_helper][smzht/mozc_emacs_helper: mozc_emacs_helper for Windows]]
      ã“ã‚Œã¯Unixç”¨

- Windowsç”¨ã®mozc_emacs_helper.exeã‚’åˆ©ç”¨ã™ã‚‹
  - [[https://github.com/smzht/mozc_emacs_helper][smzht/mozc_emacs_helper: mozc_emacs_helper for Windows]]
    ã“ã“ã‹ã‚‰mozc_emacs_helper.exeã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦
    ~/Dropbox/WSL/ä»¥ä¸‹ã«ãŠã„ã¦ãŠã

  - ~/bin/ã«mozc_emacs_helper_win.shã‚’ä½œæˆã™ã‚‹

    #+begin_src bash :tangle no
      #!/bin/sh

      ~/Dropbox/WSL/mozc_emacs_helper.exe "$@" 2> /dev/null
    #+end_src
#+end_comment

#+NAME: mozc-helper
#+begin_src emacs-lisp :tangle no
  (if (getenv "WSLENV")
      ;; (setq mozc-helper-program-name "mozc_emacs_helper_win.sh")
      (setq mozc-helper-program-name "mozc_emacs_helper")
    (setq mozc-helper-program-name "mozc_emacs_helper"))
#+end_src

*** Mozcã«ã‚ˆã‚‹å¤‰æ›æ“ä½œã®è¨­å®š
æ¨™æº–ã®å…¥åŠ›æ–¹å¼ã‚’Mozcã«è¨­å®šã—ã¾ã™ã€‚
C-oã§å¤‰æ›ãƒ¢ãƒ¼ãƒ‰ã€C-jã§ç›´æ¥å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚

ãªãŠã€org-modeã§C-jã‚’ï¼ˆç‰¹æ®Šãªï¼Ÿï¼‰æ”¹è¡Œã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€leafã®bind*ã§ã‚ªãƒ¼ãƒãƒ©ã‚¤ãƒ‰ã—ã¾ã™ï¼ˆä¾¿åˆ©ï¼ï¼‰ã€‚ã¡ãªã¿ã«ã€org-modeã§ã®æ”¹è¡Œã¯C-mã‹RETã§ã‚‚ã§ãã¾ã™ã€‚C-jã®å‡ºç•ªãŒã©ã“ã«ã‚ã‚‹ã®ã‹ã€ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€IMã®çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã—ã‹ãªã„ã®ã§ã€ãã‚Œãã‚Œã®çŠ¶æ…‹ã«é·ç§»ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã—ã¾ã™ã€‚

IMEãŒoffã®ã¨ãã€isearchã«å…¥ã‚Šã€IMEã‚’onã«ã—ã¦æ¤œç´¢ã—ãŸã‚ã¨ã€æˆ»ã£ãŸã¨ãã«IMEãŒoffã«ãªã£ã¦æ¬²ã—ã„ã®ã§ã€ãã®ãŸã‚ã®è¨­å®šã‚’ã—ã¾ã™ï¼ˆmigemoã‚’ä½¿ã†ã®ãªã‚‰ã€ã‚ã¾ã‚Šå¿…è¦ãªã„è¨­å®šã‹ã‚‚ï¼‰ã€‚

#+begin_comment
IME ON  -> isearch -> OFF -> done -> ON
IME ON  -> isearch -> ON  -> done -> ON
IME OFF -> isearch -> ON  -> done -> ON*
IME OFF -> isearch -> OFF -> done -> OFF
*ã®ã¨ã“ã‚ã§çŠ¶æ…‹ãŒç‹‚ã†ã€‚
#+end_comment

#+NAME: mozc-im
#+begin_src emacs-lisp :tangle no :noweb yes
  (leaf mozc-im
    :ensure t
    :require t
    :custom ((default-input-method . "japanese-mozc-im"))
    :bind* (("C-o" . enable-input-method)
            ("C-j" . disable-input-method))
    :config
    (defvar-local mozc-im-mode nil)

    (add-hook 'mozc-im-activate-hook
              (lambda nil
                (setq mozc-im-mode t)))
    (add-hook 'mozc-im-deactivate-hook
              (lambda nil
                (setq mozc-im-mode nil)))

    (defun enable-input-method (&optional arg interactive)
      (interactive "P\np")
      (if (not current-input-method)
          (toggle-input-method arg interactive)))
    (defun disable-input-method (&optional arg interactive)
      (interactive "P\np")
      (if current-input-method
          (toggle-input-method arg interactive)))

    (add-hook 'isearch-mode-hook
              (lambda () (setq im-state mozc-im-mode)))
    (add-hook 'isearch-mode-end-hook
              (lambda ()
                (unless (eq im-state mozc-im-mode)
                  (if im-state
                      (activate-input-method default-input-method)
                    (deactivate-input-method))))))
#+end_src

#+RESULTS: mozc-im
: mozc-im

*** ã‚«ãƒ¼ã‚½ãƒ«ã‚«ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹
ç¾åœ¨ã®çŠ¶æ…‹ã«åˆã‚ã›ã¦ã€ã‚«ãƒ¼ã‚½ãƒ«ã®è‰²ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã®è¨­å®šã§ã¯ã€ç›´æ¥å…¥åŠ›ã®æ™‚ã¯ã‚°ãƒ¬ã‚¤ã€å¤‰æ›ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã¯ç·‘ã«ã—ã¦ã„ã¾ã™ã€‚ãƒªãƒ¼ãƒ‰ã‚ªãƒ³ãƒªãƒ¼ã§ã¯é»„è‰²ã«ãªã‚Šã¾ã™ã€‚ãã‚Œä»¥å¤–ã®çŠ¶æ…‹ã¯ã€ç§ã¯ä½¿ã„ã¾ã›ã‚“ãŒå¿µã®ç‚ºã€‚

ãªãŠã€Emacsã§ä½¿ãˆã‚‹ã‚«ãƒ©ãƒ¼ã®ä¸€è¦§ã¯ã€M-x list-colors-displayã§ç¢ºèªã§ãã¾ã™ã€‚

#+NAME: mozc-cursor-color
#+begin_src emacs-lisp :tangle no
  (leaf mozc-cursor-color
    :el-get iRi-E/mozc-el-extensions
    :require t
    :config
    (setq mozc-cursor-color-alist
          '((direct        . "gray")
            (read-only     . "yellow")
            (hiragana      . "green")
            (full-katakana . "goldenrod")
            (half-ascii    . "dark orchid")
            (full-ascii    . "orchid")
            (half-katakana . "dark goldenrod")))
    (advice-add 'mozc-cursor-color-update :around
                (lambda (orig-fun &rest args)
                  (let ((mozc-mode mozc-im-mode))
                    (apply orig-fun args)))))
#+end_src

#+RESULTS: mozc-cursor-color
: mozc-cursor-color

*** å¤‰æ›å€™è£œã‚’posframeã§è¡¨ç¤ºã™ã‚‹

posframeã¯Emacs26ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½ã§ã™ã€‚Emacs26ã¯3å¹´ã»ã©å‰ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã‚ˆã†ã§ã™ã‹ã‚‰ã€ç§ã¯é•·ã„ã“ã¨posframeã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ä»Šå›ã®è¨­å®šå¤‰æ›´ã®ç›®ç‰å•†å“ã§ã™ã€‚ã€Œ[[https://blog.deltabox.site/post/2019/06/mozc-posframe/][mozcã®å€™è£œã‚’posframeã§è¡¨ç¤ºã™ã‚‹Emacsæ‹¡å¼µã‚’ä½œã£ãŸ]]ã€ã«æ›¸ã„ã¦ã„ã‚‹é€šã‚Šã€org-modeã§ã®å¤‰æ›ã®éš›ã®è¡¨ç¤ºå´©ã‚Œã¯ç›®ã«ä½™ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚

ä½œè€…ã•ã‚“ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

#+NAME: mozc-posframe
#+begin_src emacs-lisp :tangle no
  (leaf mozc-posframe
    :straight (mozc-posframe :type git :host github :repo "derui/mozc-posframe")
    :config
    (mozc-posframe-register)
    (setq mozc-candidate-style 'posframe))
#+end_src

#+RESULTS: mozc-posframe
: mozc-posframe

** Windowsã§æ–‡å­—ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’UTF-8ã«
#+begin_src emacs-lisp
  (leaf windows
    :when (eq system-type 'windows-nt)
    :config
    (prefer-coding-system 'utf-8))
#+end_src

#+RESULTS:
: windows

** Windows IMEè¨­å®š
- [[https://nosubject.io/windows10-emacs-27-w32-ime/][[Emacs] Windows10 ã§ Emacs 27 ã‚’ä½¿ã† | ** nosubject.io **]]
- [[https://qiita.com/tawara_/items/0a7b8c50a48ea86b2d91][ã‚ã® IBM ãŒä½œã£ãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ã„ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ•ã‚©ãƒ³ãƒˆã€PlemolJPã€ã‚’ä½œã£ã¦ã¿ãŸ - Qiita]]

  #+begin_src emacs-lisp
    (leaf tr-ime
      :when (eq system-type 'windows-nt)
      :ensure t
      :setq
      (default-input-method . "W32-IME")
      (w32-ime-mode-line-state-indicator-list . '("[--]" "[ã‚]" "[--]"))
      :setq-default
      (w32-ime-mode-line-state-indicator . "[--]")
      :config
      (tr-ime-standard-install)
      (w32-ime-initialize)
      ;; IMEåˆ¶å¾¡ï¼ˆyes/noãªã©ã®å…¥åŠ›æ™‚ã«IMEã‚’offã«ã™ã‚‹
      (wrap-function-to-control-ime 'universal-argument t nil)
      (wrap-function-to-control-ime 'read-string nil nil)
      (wrap-function-to-control-ime 'read-char nil nil)
      (wrap-function-to-control-ime 'read-from-minibuffer nil nil)
      (wrap-function-to-control-ime 'y-or-n-p nil nil)
      (wrap-function-to-control-ime 'yes-or-no-p nil nil)
      (wrap-function-to-control-ime 'map-y-or-n-p nil nil)
      ;; é€šå¸¸ä½¿ç”¨ã™ã‚‹ãƒ•ã‚©ãƒ³ãƒˆ
      ;; (set-frame-font "BIZ UDã‚´ã‚·ãƒƒã‚¯-12" nil t)
      (set-frame-font "PlemolJP-12" nil t)
      (setq-default line-spacing 0) ; è¡Œé–“
      ;; IMEæœªç¢ºå®šæ™‚ã®ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
      (modify-all-frames-parameters '((ime-font . "PlemolJP-12")))
      :bind
      ("C-o" . toggle-input-method))
  #+end_src

  #+RESULTS:
  : tr-ime

  #+begin_src emacs-lisp
    (when (eq system-type 'windows-nt)
      (package-install 'tr-ime)
      (tr-ime-standard-install)
      (setq default-input-method "W32-IME")
      (w32-ime-initialize))
  #+end_src

** WSLã§Windowså´ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ç«‹ã¡ä¸Šã’ã‚‹

- WSLå´ã‹ã‚‰Windowsã‚’åˆ¶å¾¡ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ãƒªãƒ†ã‚£
  - [[https://github.com/wslutilities/wslu][wslutilities/wslu: A collection of utilities for Windows 10 Linux Subsystems]]
  - wslviewã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹

- EmacsãŒä½¿ã†ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¨­å®šã™ã‚‹
  - [[https://www.emacswiki.org/emacs/BrowseUrl#h5o-4][[Home] Browse Url]]

- WSLã‹ã©ã†ã‹åˆ¤æ–­
  - [[https://qiita.com/miy4/items/acf50a9c0a053b878b56#%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E3%82%92%E6%8E%A2%E3%81%99][Emacsã§WSLã‚’ä½¿ã£ã¦ã„ã‚‹/ã„ãªã„ã‚’åˆ¤æ–­ã™ã‚‹ - Qiita]]

[[help:browse-url-browser-functionâ€™s]]

#+begin_src emacs-lisp
  (when (and (eq system-type 'gnu/linux)
             (getenv "WSLENV"))
    (setq browse-url-browser-function 'my/browser)
    (setq browse-url-generic-program "web-browser"))

  (defun my/browser (url &rest ignore)
    "Browse URL using wslview."
    (interactive "sURL: ")
    (shell-command (concat "wslview " "'" url "'")))
#+end_src

#+RESULTS:
: my/browser

* æœªæ•´ç†
** EAF - Emacs Application Framework
+ .emacs.dã‚’gitã§ç®¡ç†ã—ã¦ã„ã‚‹ã®ã§submoduleã§è¿½åŠ 
+ install-eaf.py ã‚’å®Ÿè¡Œã™ã‚‹å‰ã« apt update && apt upgrade

#+begin_src emacs-lisp :tangle no
  (leaf eaf
    :load-path "~/.emacs.d/site-lisp/emacs-application-framework" ; Set to "/usr/share/emacs/site-lisp/eaf" if installed from AUR
    :require t
    :custom ; See https://github.com/emacs-eaf/emacs-application-framework/wiki/Customization
    (eaf-browser-continue-where-left-off . t)
    (eaf-browser-enable-adblocker . t)
    (browse-url-browser-function . 'eaf-open-browser)
    :config
    (require 'eaf-browser)
    (require 'eaf-pdf-viewer)

    (defalias 'browse-web #'eaf-open-browser)
    (eaf-bind-key scroll_up "C-n" eaf-pdf-viewer-keybinding)
    (eaf-bind-key scroll_down "C-p" eaf-pdf-viewer-keybinding)
    ;; (eaf-bind-key take_photo "p" eaf-camera-keybinding)
    (eaf-bind-key nil "M-q" eaf-browser-keybinding)) ;; unbind, see more in the Wiki
#+end_src

#+RESULTS:
: eaf
** project.el
+ èª¬æ˜
  * ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ‰±ã†

+ è¨­å®š

  #+begin_src emacs-lisp :tangle no
    (leaf project :package t :require t)
  #+end_src

  #+RESULTS:
  : project

** hydra

+ [[https://medium.com/@mopemope/hydra-%E3%81%AE%E3%82%B9%E3%82%B9%E3%83%A1-88a4168f945c][Hydra ã®ã‚¹ã‚¹ãƒ¡. ã¿ãªã•ã‚“ã€ Emacs ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿå…ˆæ—¥ Emacs 26.1â€¦ | by mopemope | Medium]]

#+begin_src emacs-lisp
(defhydra hydra-zoom (global-map "<f2>")
  "zoom"
  ("g" text-scale-increase "in")
  ("l" text-scale-decrease "out"))
#+end_src

#+RESULTS:
: hydra-zoom/body

* ãŠã‚ã‚Šã«
** ãŠç´„æŸã®è¨˜è¿°

#+begin_src emacs-lisp
(provide 'README)

;; Local Variables:
;; indent-tabs-mode: nil
;; byte-compile-warnings: (not cl-functions obsolete)
;; End:

;;; README.el ends here
#+end_src

** å‚è€ƒæ–‡çŒ®
1. [[https://uwabami.github.io/cc-env/Emacs.html][Emacs ã®è¨­å®š | Youhei SASAKIâ€™s official site]]
* TODO [#C] Emacsè¨­å®šã®ã‚¢ã‚¤ãƒ‡ã‚¢ [18/22]                              :REFILE:
- [ ] embarkã§Googleæ¤œç´¢
- [ ] emacs ã® org-mode ã¨ google calendar ã‚’é€£æºã•ã›ã‚‹ org-gcal - Qiita
  SCHEDULED: [2021-11-18 Thu]
  :PROPERTIES:
  :CREATED:  [2021-11-18 Thu 02:20]
  :END:

  https://qiita.com/clothoid/items/73a937a22eeeb82c3ee7
- [ ] flymakeã§ã‚¹ãƒšãƒ«ãƒã‚§ãƒƒã‚¯
  :PROPERTIES:
  :CREATED: <2021-11-13 Sat 11:05>
  :ANNOTADED:
  :END:
- [X] [[https://qiita.com/Ladicle/items/feb5f9dce9adf89652cf#%E5%B0%8F%E6%8C%87%E3%82%92%E9%85%B7%E4%BD%BF%E3%81%9B%E3%81%9A%E3%81%8B%E3%81%A4%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%AE%E3%82%AC%E3%82%A4%E3%83%89%E3%82%92%E5%87%BA%E3%81%99----hydra][Emacsãƒ¢ãƒ€ãƒ³åŒ–è¨ˆç”» -ã‹ã‚Emacsç·¨- - Qiita]]
- [ ] å‰äºº ã‚¢ãƒ¼ã‚µãƒ¼ãƒ»ï¼£ãƒ»ã‚¯ãƒ©ãƒ¼ã‚¯ã€€åè¨€é›†(è‹±è¨³ä»˜)ï½œå¿ƒã®å¸¸å‚™è–¬
   :PROPERTIES:
   :CREATED:  [2021-10-16 Sat 12:45]
   :END:

 http://medicines.aquaorbis.net/meigen/kaigai/bungaku-e/arthur-c-clarke
- [X] org2blogã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã€é–‹å§‹å´ãŒã§ãªã„ï¼Ÿ
- [X] ãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒˆã‚»ãƒ¼ãƒ–ã‚¢ãƒƒãƒ—
  :PROPERTIES:
:CREATED: <2021-11-10 Wed 09:47>
:ANNOTADED: [[file:~/.emacs.d/README.org::*leaf][leaf]]
:END:
  - [[http://emacs.rubikitch.com/backup-each-save/][backup-each-save.el : Emacså¼å¤§å¯Œè±ªçš„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ä¿å­˜ã™ã‚‹åº¦ã«æ—¥æ™‚ä»˜ããƒ•ã‚¡ã‚¤ãƒ«ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—]]
  - [[http://emacs.rubikitch.com/real-auto-save/][real-auto-save.el : ãƒãƒƒãƒ•ã‚¡ã‚’è‡ªå‹•ä¿å­˜ã•ã›ã‚‹è¶…ã‚·ãƒ³ãƒ—ãƒ«ãªãƒã‚¤ãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰]]
- [X] org-publishã‚’ä½¿ã£ã¦orgã§ãƒ–ãƒ­ã‚°ã‚’æ›¸ãè©± - Qiita
  :PROPERTIES:
  :CREATED:  [2021-11-18 Thu 03:05]
  :END:

  https://qiita.com/conao3/items/f81cf964198d4da93a05
- [X] org-gfmã‚’å°å…¥ã™ã‚‹
  :PROPERTIES:
:CREATED: <2021-11-12 Fri 10:30>
:ANNOTADED:
:END:
  å¿…è¦ã«ãªã£ãŸã‚‰ã‚„ã‚ã†
- [X] Emacs ã® org-mode ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã‚’ã—ã‚ˆã†ï¼ - Qiita
  SCHEDULED: [2021-11-18 Thu]
  :PROPERTIES:
  :CREATED:  [2021-11-18 Thu 02:19]
  :END:

  https://qiita.com/zonkyy/items/821ea2b1e20f575c222f
- [X] notmuchã§ãƒ¡ãƒ¼ãƒ«ä¸­ã®URLãŒEnterã§ã¯é–‹ã‘ãªã„
  :PROPERTIES:
:CREATED:  <2021-11-17 Wed 18:07>
:ANNOTADED: [[notmuch:id:001001d7db84$acfb8610$06f29230$@brain.riken.jp][Email from hkimura@brain.riken.jp: [sys_education:00683] Re: ç¬¬ï¼’ï¼’å›SICäººè²¡è‚²æˆå”è­°ä¼šã®æ—¥ç¨‹èª¿æ•´]]
:END:
- [X] fniessen/org-html-themes: How to export Org mode files into awesome HTML in 2 minutes
  :PROPERTIES:
  :CREATED:  [2021-11-18 Thu 19:14]
  :END:

  https://github.com/fniessen/org-html-themes
- [X] org-tree-slideã§ãƒ—ãƒ¬ã‚¼ãƒ³
   :PROPERTIES:
   :CREATED:  [2021-09-29 Wed 12:24]
   :END:
   å¯¾è±¡è€…ãŒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã ã‘ãªã‚‰ã‚ˆã„ã‹ã‚‚
   https://github.com/daviwil/emacs-from-scratch/blob/master/show-notes/Emacs-Tips-04.org
- [X] Org-roamäº‹å§‹ã‚ - Qiita
   :PROPERTIES:
   :CREATED:  [2021-10-16 Sat 02:30]
   :END:
    https://qiita.com/unsignedint/items/749dd5e87bcadf13e3a6

   ã¾ã ã„ã¾ã„ã¡å¿…è¦æ€§ãŒã‚ã‹ã‚‰ãªã„
   ãªã‚‹ã¹ãå°‘ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ãŸã»ã†ãŒã‚ˆã„ã‚ˆã†ã«æ€ã†
- [X] Emacs ã®ãƒ†ãƒ¼ãƒã‚’å¤‰æ›´ | äºŒä»£ç›®ä¿ºã®ãƒ¡ãƒ¢
   :PROPERTIES:
   :CREATED:  [2021-10-16 Sat 18:53]
   :END:

   https://www.kwonline.org/memo2/2020/06/14/load-themes-on-emacs-24/
- [X] Emacs ã®è¨­å®š | Youhei SASAKIâ€™s official site
   CLOSED: [2021-11-09 Tue 09:25]
   :PROPERTIES:
   :CREATED:  [2021-10-25 Mon 18:37]
   :END:
  https://uwabami.github.io/cc-env/Emacs.html
- [X] emacs-eaf/emacs-application-framework: A free/libre and open-source extensible framework that revolutionizes the graphical capabilities of Emacs, the key to ultimately Live in Emacs
   CLOSED: [2021-11-09 Tue 09:25]
   :PROPERTIES:
   :CREATED:  [2021-10-26 Tue 10:26]
   :END:

    https://github.com/emacs-eaf/emacs-application-framework
- [X] SOMEDAY [Home] unbound.el
   :PROPERTIES:
   :CREATED:  [2021-11-09 Tue 03:17]
   :END:
   ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®ç©ºãã‚’æ¢ã™ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã‚ˆã†ã ã€‚

   https://www.emacswiki.org/emacs/unbound.el
- [X] kawabata/ox-pandoc: Another org-mode exporter via pandoc.
  :PROPERTIES:
  :CREATED:  [2021-11-12 Fri 18:23]
  :END:

  https://github.com/kawabata/ox-pandoc
- [X] SOMEDAY Emacsã®ä¸­ã§å‹•ãä½œå›³ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ | Misohena Blog
   :PROPERTIES:
   :CREATED:  [2021-09-22 Wed 14:54]
   :END:
   http://misohena.jp/blog/2021-09-21-emacs-easy-draw.html

  - [[https://github.com/misohena/el-easydraw][GitHub - misohena/el-easydraw: Embedded drawing tool for Emacs]]
  - ãƒã‚¤ãƒˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ã‚¨ãƒ©ãƒ¼

  #+begin_src emacs-lisp :tangle no
  (leaf edraw-org
    :el-get misohena/el-easydraw
    :require t
    :after org
    :config
    (edraw-org-setup-default))
  #+end_src

  #+RESULTS:
  : edraw-org

   è©¦ã—ã¦ã¿ãŸã‘ã©å‹•ã‹ãªã‹ã£ãŸ
- [X] org-mode ã‚’ãƒã‚¤ãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã¨ã—ã¦ä½¿ã† orgstruct-modeã€‚ - æ—¥ã€…ã€ã¨ã‚“ã¯èªã‚‹ã€‚
  :PROPERTIES:
  :CREATED:  [2021-11-17 Wed 21:50]
  :END:

  https://tomoya.hatenadiary.org/entry/20090414/1239697066
  orgstruct-modeã¯å¤ã„
- [X] TABãƒãƒ¼
   CLOSED: [2021-11-09 Tue 09:24]
   :PROPERTIES:
   :CREATED:  [2021-11-03 Wed 18:03]
   :END:

 https://github.com/daviwil/emacs-from-scratch/blob/82f03806d90eb356b815cf514d10b6d863a2cbdc/show-notes/Emacs-Tips-06.org
